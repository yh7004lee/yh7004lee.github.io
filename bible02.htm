<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>ì„±ê²½ ì•”ì†¡ ì¹´ë“œ</title>
<style>

* {
  box-sizing: border-box;
}

html, body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
}
body {
  background-color: #121212;
  color: #fff;
  display: flex;
  flex-direction: column;
  margin: 0;
  padding: 0;
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}


#player-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background: #1e1e1e;
  padding: 10px 10px calc(10px + env(safe-area-inset-bottom)); /* í•˜ë‹¨ ì•ˆì „ ì—¬ë°± ì¶”ê°€ */
  box-shadow: 0 -2px 10px rgba(0,0,0,0.5);
  box-sizing: border-box;
  z-index: 9999;
}

    #verse-title {
      font-size: 20px;
      font-weight: bold;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      color: #ffffff;
    }

    #progress-container {
      height: 4px;
      background: #333;
      border-radius: 2px;
      margin: 4px 0 12px;
      position: relative;
    }

    #progress-bar {
      height: 100%;
      background: #03dac6;
      border-radius: 2px;
      width: 0%;
      position: absolute;
    }

    #controls {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
    }

    .btn {
      background: #03dac6;
      color: #000;
      border: none;
      padding: 6px 16px;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
    }

    .btn:hover {
      background: #00bfa5;
    }

#playlist-overlay {
  display: none;
  flex-direction: column;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(18,18,18,0.98);
  z-index: 10;
  overflow: hidden;
}

    #playlist-header {
      position: sticky;
      top: 0;
      background: #1e1e1e;
      padding: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      z-index: 1;
    }

    #playlist-controls {
      display: flex;
      gap: 15px;
      margin-bottom: 6px;
    }

    .btn-small {
      background: #03dac6;
      color: #000;
      border: none;
      padding: 6px 16px;
      font-size: 16px;
      border-radius: 4px;
      cursor: pointer;
    }

    .btn-small:hover {
      background: #00bfa5;
    }




#playlist-checkboxes {
  overflow-y: auto;
  padding: 10px 0px;
  position: relative;
  z-index: 10;
  box-sizing: border-box;
   margin: 10px 0 0 0;

}


.playlist-item {
  display: flex;
   vertical-align: bottom;
   font-size: 1.1rem;
   line-height: 1.2; /* <= ì¶”ê°€ */ 
  gap: 1px;

  min-height: 44px; /* ëª¨ë°”ì¼ ê¸°ë³¸ í„°ì¹˜ ì˜ì—­ ê¸°ì¤€ */
 
}
.playlist-item input[type="checkbox"] {
  flex-shrink: 0;        /* ì²´í¬ë°•ìŠ¤ í¬ê¸° ê³ ì • */
  width: 18px;           /* ì²´í¬ë°•ìŠ¤ í¬ê¸° ì¡°ì • */
  height: 18px;
}


/* ìƒë‹¨ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
.top-buttons {
  display: flex;
  justify-content: space-between; /* ë²„íŠ¼ì„ ì¢Œìš°ë¡œ ìµœëŒ€í•œ ë²Œë¦¼ */
   align-items: center; /* <-- stretchì—ì„œ centerë¡œ ë³€ê²½ */
  background-color: #1e1e1e;
  padding: 0;
  z-index: 2;
}




.top-buttons button {
  flex: 1; /* ë²„íŠ¼ ë„ˆë¹„ë¥¼ ê· ë“±í•˜ê²Œ ë§Œë“¦ */
  text-align: center; /* ë²„íŠ¼ ì•ˆì˜ í…ìŠ¤íŠ¸ ì¤‘ì•™ ì •ë ¬ */
  padding: 0 20px;
  height: 40px;
  line-height: 40px;
  vertical-align: middle;
  background: none;
  border: none;
  color: #fff;
  font-size: 1.1rem;
  cursor: pointer;
  border-right: 1px solid #333333;
  border-radius: 0;
  transition: background-color 1s ease, color 0.3s ease; /* âœ… transition ìˆ˜ì • */
}

/* í´ë¦­(ë˜ëŠ” í„°ì¹˜) ì‹œ íš¨ê³¼ */
.top-buttons button:active {
  background-color: rgba(197, 79, 109, 0.8); /* âœ… ì•½ê°„ì˜ íˆ¬ëª…ë„ (0.7) ì¶”ê°€ */
  transition: background-color 1s ease; /* âœ… transition ì¶”ê°€ */
}


/* í˜¸ë²„ íš¨ê³¼ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ */
.top-buttons button:hover,
.top-buttons button:focus {
  background-color: rgba(197, 79, 109, 0.8);âœ… ì•½ê°„ì˜ íˆ¬ëª…ë„ (0.7) ì¶”ê°€ */
}



/* í•˜ë‹¨ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
.bottom-buttons {
  display: flex;
  justify-content: space-around;
  background-color: #1e1e1e;
  padding: 10px 0;
  z-index: 2;
}

.bottom-buttons button {
  background: none;
  border: none;
  color: #fff;
  font-size: 1.1rem;
  cursor: pointer;
  transition: background-color 0.3s ease, color 0.3s ease;
  border-radius: 8px;
}

.bottom-buttons button:hover,
.bottom-buttons button:focus {
  background-color: #2a2a2a;
}

.bottom-buttons button:active {
  background-color: #333333;
}

.verse-container {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  padding: 14px 0 40px 0;
  gap: 14px;
  overflow-y: auto;
  overflow-x: hidden;
  touch-action: pan-y;
  margin: 50 0 0 0;  /* ğŸ”§ ìƒë‹¨ ë§ˆì§„ 50px */
  box-sizing: border-box;
}




.verse-box, 
.favorite-box {
 /*height: auto; */
  width: 100%;
  margin: 0;
  padding: 10px;
  box-sizing: border-box;

}


.verse-box {
  background: #1e1e1e;
  /*border-radius: 15px;*/
  text-align: left;
  cursor: pointer;
}


.favorite-box {
  display: flex;
  align-items: center;
  gap: 10px; /* ê°„ê²© ì¡°ì ˆ */
  background: #1e1e1e;
   /*border-radius: 15px;*/
  cursor: pointer;
}




.verse-title {
  font-size: 1.6rem;
  /*font-weight: bold;*/
  color: #FFF; /* ì£¼í™©ë¹› ë…¸ë‘ */
  margin: 0;
}

.verse-text {
  font-size: 1.6rem;
  line-height: 2.4rem;
   /*font-weight: bold;*/
  color: #FFF; /* ì—°ë…¹ìƒ‰ */
  margin: 0;
}



.favorite-label {
  font-size: 1.6rem;
  color: #fff; /* ì—°í•˜ëŠ˜ìƒ‰ */
   /*font-weight: bold;*/
}




/* ì²´í¬ë°•ìŠ¤ í¬ê¸° ì¡°ì • */
#favoriteCheckbox {
  width: 17px;
  height: 17px;
  transform: scale(1.5);
}




/* ë§ì”€ í¸ì§‘ ëª¨ë“œ ìŠ¤íƒ€ì¼ */
.edit-container {
  position: fixed;
  top: 0; /* ìˆ˜ì •: ê¸°ì¡´ 60px -> 0 */
  bottom: 0;
  left: 0;
  right: 0;
  background-color: #121212;
  padding: 10px 15px 20px 15px;
  display: flex;
  flex-direction: column;
  z-index: 5;
  overflow: auto;
}

.edit-title {
  font-size: 1.4rem;
  color: #fff;
 font-weight: normal; /* êµµê²Œ ë³´ì´ì§€ ì•Šë„ë¡ ì„¤ì • */
  margin: 0;
  padding-top: 4px;
  padding-left: 10px;
  padding-bottom: 6px;
}

#editTextarea {
  flex: 1;
  width: 100%;
  resize: none;
  font-size: 1rem;
  padding: 10px;
  background-color: #1e1e1e;
  color: #fff;
  border: 1px solid #444;
  border-radius: 10px;
  box-sizing: border-box;
}

.edit-buttons {
  display: flex;
  justify-content: space-around;
  margin-top: 15px;
}

.edit-buttons button {
  flex: 1;
  margin: 0 5px;
  padding: 10px;
  font-size: 1.1rem;
  border: none;
  border-radius: 8px;
  background-color: #2a2a2a;
  color: #fff;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.edit-buttons button:hover {
  background-color: #333333;
}

@media (max-width: 768px) {
  #editTextarea {
    font-size: 1rem;
  }

  .edit-title {
    font-size: 1.2rem;
  }
}

.verse-box.animate-left,
.favorite-box.animate-left {
  animation: slideLeft 0.7s ease;
}

.verse-box.animate-right,
.favorite-box.animate-right {
  animation: slideRight 0.7s ease;
}

@keyframes slideLeft {
  0% {
    opacity: 0;
    transform: translateX(50px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideRight {
  0% {
    opacity: 0;
    transform: translateX(-50px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}


#settingsMenu {
  display: none;
  position: absolute;
  top: 48px;
  right: 10px;
  width: 90vw;
  max-width: 300px;
  background-color: #1e1e1e;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 14px;
  padding: 5px 12px;
box-shadow:
  /* ë„¤ì˜¨ ê´‘ì±„ - ë” ë°ê³  ì„ ëª…í•˜ê²Œ */
  0 0 4px rgba(0, 255, 255, 0.8),   /* í˜•ê´‘ ì²­ë¡ë¹› */
  0 0 8px rgba(0, 255, 255, 0.6),
  0 0 16px rgba(0, 255, 255, 0.5),
  0 0 24px rgba(0, 255, 255, 0.3),

  /* ì•„ë˜ë¡œ ë“œë¦¬ìš´ ì–´ë‘ìš´ ê·¸ë¦¼ì */
  0 10px 20px rgba(0, 0, 0, 0.5);
  
z-index: 10000;
  animation: fadeInMenu 0.3s ease-out;
}

@keyframes fadeInMenu {
  from {
    opacity: 0;
    transform: translateY(-10px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

#settingsMenu h3 {
  font-size: 1.2rem;
  color: #ffffff;
  margin-top: 0;
  margin-bottom: 10px;
  padding-bottom: 6px;
  border-bottom: 1px solid #333;
}

#settingsMenu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

#settingsMenu ul li {
  padding: 10px 14px;
  margin-bottom: 6px;
  background-color: #262626;
  border-radius: 10px;
  color: #eee;
  font-size: 1rem;
  cursor: pointer;
  transition: background-color 0.25s ease;
}

#settingsMenu ul li:hover {
  background-color: #333;
  color: #03dac6;
}

#settingsMenu ul li:active {
  background-color: #444;
}



/* ë©”ë‰´ í•­ëª© */
.settings-item {
  padding: 10px 10px;
  font-size: 1.1rem;
  color: #fff;
  background-color: transparent;
  user-select: none;
  cursor: pointer;
  transition: background-color 0.3s ease;
  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
}

/* ë§ˆì§€ë§‰ í•­ëª©ì€ ë³´ë” ì œê±° */
.settings-item:last-child {
  border-bottom: none;
}

/* í˜¸ë²„ íš¨ê³¼ */
.settings-item:hover {
  background-color: #c54f6d;
}

/* ìŠ¬ë¼ì´ë” */
.settings-item input[type="range"] {
  width: 100%;
  margin-top: 6px;
  cursor: pointer;
}
</style>
</head>
<body>

<div class="top-buttons">
  <button id="toggleButton" onclick="toggleVerse()">ìˆ¨ê²¨</button>
  <button id="modeToggleButton" onclick="toggleMode()">ëœë¤</button>
  <button id="favoriteToggleButton" onclick="toggleFavorites()">ì¦ì°¾</button>
<button id="settingsToggleButton" onclick="toggleSettingsMenu()">ì„¤ì •</button>
</div>


<div id="settingsMenu">
  <div class="inner-container">
    <div class="settings-item" onclick="handleEditClick()">ğŸ’— ë§ì”€ í¸ì§‘í•˜ê¸°</div>
    <div class="settings-item" onclick="showPlayer()">ğŸ’— ì „ì²´ ë§ì”€ë“£ê¸°</div>
<div class="settings-item" onclick="favoritePlayer()">ğŸ’— ì¦ê²¨ì°¾ê¸° ë§ì”€ë“£ê¸°</div>
    <div class="settings-item">
      ğŸ’— ë§ì”€êµ¬ì ˆ ê¸€ìí¬ê¸°
      <input id="titleFontSlider" type="range" min="1" max="6" value="1">
    </div>
    <div class="settings-item">
      ğŸ’— ë§ì”€ë‚´ìš© ê¸€ìí¬ê¸°
      <input id="textFontSlider" type="range" min="1" max="6" value="1">
    </div>
    <div class="settings-item" onclick="resetFontSizes()">ğŸ’— ê¸€ìí¬ê¸° ì´ˆê¸°í™”</div>
    <div class="settings-item" onclick="openHelpPopup()">ğŸ’— ë„ì›€ë§</div>
    <div class="settings-item" onclick="hideSettingsMenu()">ğŸ’— ë‚˜ê°€ê¸°</div>
  </div>
</div>



<div class="verse-container" id="verseContainer">
  <div class="verse-box">
    <div class="verse-title" id="verseTitle"></div>
  </div>
  <div class="verse-box">
    <div class="verse-text" id="verseText"></div>
  </div>
  <div class="favorite-box" onclick="toggleFavoriteCheckbox()">
    <span class="favorite-label">ì¦ê²¨ì°¾ê¸° ì¶”ê°€  </span>
    <input type="checkbox" id="favoriteCheckbox" onclick="event.stopPropagation(); updateFavorite();">
  </div>
</div>


 <div id="player-bar" style="display: none;">
    <div id="verse-title">1. ê³ ë¦°ë„í›„ì„œ 5ì¥ 17ì ˆ</div>
    <div id="progress-container">
      <div id="progress-bar"></div>
    </div>
    <div id="controls">
      <button class="btn" id="togglePlayBtn"  onclick="playAudio()">ì¬ìƒ</button>
      <button class="btn" onclick="pauseAudio()">ì •ì§€</button>
      <button class="btn" onclick="togglePlaylist()">ëª©ë¡</button>
      <button class="btn" onclick="stopAll()">ë‹«ê¸°</button>
    </div>
  </div>

  <div id="playlist-overlay">
    <div id="playlist-header">
      <div id="playlist-controls">
        <button class="btn-small" onclick="toggleSelectAll()">ì„ íƒ</button>
<button class="btn-small" onclick="clearAllSelection()">í•´ì œ</button>
        <button class="btn-small" onclick="applySelected()">ì ìš©</button>
        <button class="btn-small" onclick="hidePlaylist()">ìˆ¨ê²¨</button>
      </div>
      <div id="playlist-checkboxes"></div>
    </div>
  </div>

  <audio id="audio" preload="metadata"></audio>




<div id="editContainer" class="edit-container" style="display: none;">
  <h2 class="edit-title">í¸ì§‘ í˜•ì‹ : ë§ì”€êµ¬ì ˆ | ë§ì”€ë‚´ìš©</h2>
  <textarea id="editTextarea"></textarea>
  <div class="edit-buttons">
    <button onclick="saveEditedVerses()">í™•ì¸</button>
    <button onclick="cancelEdit()">ì·¨ì†Œ</button>
    <button onclick="resetToOriginal()">ì´ˆê¸°í™”</button>
  </div>
</div>


<script>

let settingsVisible = false;

function toggleSettingsMenu() {
  const menu = document.getElementById("settingsMenu");
  settingsVisible = !settingsVisible;
  menu.style.display = settingsVisible ? "block" : "none";
}

document.addEventListener("click", function (event) {
  const menu = document.getElementById("settingsMenu");
  const button = document.getElementById("settingsToggleButton");
  if (!menu.contains(event.target) && event.target !== button) {
    menu.style.display = "none";
    settingsVisible = false;
  }
});

function handleEditClick() {
  toggleEditMode();
  hideSettingsMenu();
}

function hideSettingsMenu() {
  document.getElementById("settingsMenu").style.display = "none";
  settingsVisible = false;
}

// ê¸€ì í¬ê¸° ì¡°ì ˆ ìŠ¬ë¼ì´ë”ì™€ ì €ì¥ ë¡œì§
const titleFontSlider = document.getElementById("titleFontSlider");
const textFontSlider = document.getElementById("textFontSlider");
const verseTitle = document.getElementById("verseTitle");
const verseText = document.getElementById("verseText");

function applyFontSize() {
  const titleScale = parseInt(titleFontSlider.value);
  const textScale = parseInt(textFontSlider.value);

  const titleSize = 1.6 + (titleScale - 1) * 0.2;
  const textSize = 1.6 + (textScale - 1) * 0.2;

  verseTitle.style.fontSize = `${titleSize}rem`;
  verseTitle.style.lineHeight = `${titleSize * 1.4}rem`; // ì¤„ê°„ê²© ì„¤ì •
  verseText.style.fontSize = `${textSize}rem`;
  verseText.style.lineHeight = `${textSize * 1.5}rem`; // ì¤„ê°„ê²© ì„¤ì •

  localStorage.setItem("verseTitleSize", titleScale);
  localStorage.setItem("verseTextSize", textScale);
}

titleFontSlider.addEventListener("input", applyFontSize);
textFontSlider.addEventListener("input", applyFontSize);

function resetFontSizes() {
  titleFontSlider.value = 1;
  textFontSlider.value = 1;
  applyFontSize();
}

window.addEventListener("load", () => {
  const savedTitleSize = localStorage.getItem("verseTitleSize") || 1;
  const savedTextSize = localStorage.getItem("verseTextSize") || 1;

  titleFontSlider.value = savedTitleSize;
  textFontSlider.value = savedTextSize;

  applyFontSize();
});

document.getElementById("titleFontSlider").addEventListener("input", function () {
  const scale = parseInt(this.value);
  const verseTitle = document.getElementById("verseTitle");
  const fontSize = 1.4 + 0.2 * scale;
  const lineHeight = fontSize * 1.4; // ì¤„ê°„ê²© ë¹„ìœ¨
  verseTitle.style.fontSize = fontSize + "rem";
  verseTitle.style.lineHeight = lineHeight + "rem";
});

document.getElementById("textFontSlider").addEventListener("input", function () {
  const scale = parseInt(this.value);
  const verseText = document.getElementById("verseText");
  const fontSize = 1.4 + 0.2 * scale;
  const lineHeight = fontSize * 1.5; // ì¤„ê°„ê²© ë¹„ìœ¨
  verseText.style.fontSize = fontSize + "rem";
  verseText.style.lineHeight = lineHeight + "rem";
});


// localStorage key
const STORAGE_KEY_VERSES = 'savedVerses';
const STORAGE_KEY_FAVORITES = 'favorites';

// ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì—ì„œ ì €ì¥ëœ ë§ì”€ ë¶ˆëŸ¬ì˜¤ê¸°
function loadSavedVerses() {
  const saved = localStorage.getItem(STORAGE_KEY_VERSES);
  if (!saved) return null;

  try {
    const parsed = JSON.parse(saved);
    return parsed.map((v, i) => ({ ...v, id: i }));
  } catch {
    return null;
  }
}

function saveVersesToStorage(verses) {
  localStorage.setItem(STORAGE_KEY_VERSES, JSON.stringify(verses));
}

// ê¸°ë³¸ ë§ì”€ êµ¬ì ˆ ë¬¸ìì—´
const originalVersesStr = `
1. ê³ ë¦°ë„í›„ì„œ 5ì¥ 17ì ˆ| ê·¸ëŸ°ì¦‰ ëˆ„êµ¬ë“ ì§€ ê·¸ë¦¬ìŠ¤ë„ ì•ˆì— ìˆìœ¼ë©´ ìƒˆë¡œìš´ í”¼ì¡°ë¬¼ì´ë¼ ì´ì „ ê²ƒì€ ì§€ë‚˜ê°”ìœ¼ë‹ˆ ë³´ë¼ ìƒˆ ê²ƒì´ ë˜ì—ˆë„ë‹¤ 
2. ê°ˆë¼ë””ì•„ì„œ 2ì¥ 20ì ˆ| ë‚´ê°€ ê·¸ë¦¬ìŠ¤ë„ì™€ í•¨ê»˜ ì‹­ìê°€ì— ëª» ë°•í˜”ë‚˜ë‹ˆ ê·¸ëŸ°ì¦‰ ì´ì œëŠ” ë‚´ê°€ ì‚¬ëŠ” ê²ƒì´ ì•„ë‹ˆìš” ì˜¤ì§ ë‚´ ì•ˆì— ê·¸ë¦¬ìŠ¤ë„ê»˜ì„œ ì‚¬ì‹œëŠ” ê²ƒì´ë¼ ì´ì œ ë‚´ê°€ ìœ¡ì²´ ê°€ìš´ë° ì‚¬ëŠ” ê²ƒì€ ë‚˜ë¥¼ ì‚¬ë‘í•˜ì‚¬ ë‚˜ë¥¼ ìœ„í•˜ì—¬ ìê¸° ìì‹ ì„ ë²„ë¦¬ì‹  í•˜ë‚˜ë‹˜ì˜ ì•„ë“¤ì„ ë¯¿ëŠ” ë¯¿ìŒ ì•ˆì—ì„œ ì‚¬ëŠ” ê²ƒì´ë¼ 
3. ë¡œë§ˆì„œ 12ì¥ 1ì ˆ| ê·¸ëŸ¬ë¯€ë¡œ í˜•ì œë“¤ì•„ ë‚´ê°€ í•˜ë‚˜ë‹˜ì˜ ëª¨ë“  ìë¹„í•˜ì‹¬ìœ¼ë¡œ ë„ˆí¬ë¥¼ ê¶Œí•˜ë…¸ë‹ˆ ë„ˆí¬ ëª¸ì„ í•˜ë‚˜ë‹˜ì´ ê¸°ë»í•˜ì‹œëŠ” ê±°ë£©í•œ ì‚° ì œë¬¼ë¡œ ë“œë¦¬ë¼ ì´ëŠ” ë„ˆí¬ê°€ ë“œë¦´ ì˜ì  ì˜ˆë°°ë‹ˆë¼ 
4. ìš”í•œë³µìŒ 14ì¥ 21ì ˆ| ë‚˜ì˜ ê³„ëª…ì„ ì§€í‚¤ëŠ” ìë¼ì•¼ ë‚˜ë¥¼ ì‚¬ë‘í•˜ëŠ” ìë‹ˆ ë‚˜ë¥¼ ì‚¬ë‘í•˜ëŠ” ìëŠ” ë‚´ ì•„ë²„ì§€ê»˜ ì‚¬ë‘ì„ ë°›ì„ ê²ƒì´ìš” ë‚˜ë„ ê·¸ë¥¼ ì‚¬ë‘í•˜ì—¬ ê·¸ì—ê²Œ ë‚˜ë¥¼ ë‚˜íƒ€ë‚´ë¦¬ë¼ 
5. ë””ëª¨ë°í›„ì„œ 3ì¥ 16ì ˆ| ëª¨ë“  ì„±ê²½ì€ í•˜ë‚˜ë‹˜ì˜ ê°ë™ìœ¼ë¡œ ëœ ê²ƒìœ¼ë¡œ êµí›ˆê³¼ ì±…ë§ê³¼ ë°”ë¥´ê²Œ í•¨ê³¼ ì˜ë¡œ êµìœ¡í•˜ê¸°ì— ìœ ìµí•˜ë‹ˆ 
6. ì—¬í˜¸ìˆ˜ì•„ 1ì¥ 8ì ˆ| ì´ ìœ¨ë²•ì±…ì„ ë„¤ ì…ì—ì„œ ë– ë‚˜ì§€ ë§ê²Œ í•˜ë©° ì£¼ì•¼ë¡œ ê·¸ê²ƒì„ ë¬µìƒí•˜ì—¬ ê·¸ ì•ˆì— ê¸°ë¡ëœ ëŒ€ë¡œ ë‹¤ ì§€ì¼œ í–‰í•˜ë¼ ê·¸ë¦¬í•˜ë©´ ë„¤ ê¸¸ì´ í‰íƒ„í•˜ê²Œ ë  ê²ƒì´ë©° ë„¤ê°€ í˜•í†µí•˜ë¦¬ë¼ 
7. ìš”í•œë³µìŒ 15ì¥ 7ì ˆ| ë„ˆí¬ê°€ ë‚´ ì•ˆì— ê±°í•˜ê³  ë‚´ ë§ì´ ë„ˆí¬ ì•ˆì— ê±°í•˜ë©´ ë¬´ì—‡ì´ë“ ì§€ ì›í•˜ëŠ” ëŒ€ë¡œ êµ¬í•˜ë¼ ê·¸ë¦¬í•˜ë©´ ì´ë£¨ë¦¬ë¼ 
8. ë¹Œë¦½ë³´ì„œ 4ì¥ 6-7ì ˆ| ì•„ë¬´ ê²ƒë„ ì—¼ë ¤í•˜ì§€ ë§ê³  ë‹¤ë§Œ ëª¨ë“  ì¼ì— ê¸°ë„ì™€ ê°„êµ¬ë¡œ ë„ˆí¬ êµ¬í•  ê²ƒì„ ê°ì‚¬í•¨ìœ¼ë¡œ í•˜ë‚˜ë‹˜ê»˜ ì•„ë¢°ë¼ ê·¸ë¦¬í•˜ë©´ ëª¨ë“  ì§€ê°ì— ë›°ì–´ë‚œ í•˜ë‚˜ë‹˜ì˜ í‰ê°•ì´ ê·¸ë¦¬ìŠ¤ë„ ì˜ˆìˆ˜ ì•ˆì—ì„œ ë„ˆí¬ ë§ˆìŒê³¼ ìƒê°ì„ ì§€í‚¤ì‹œë¦¬ë¼ 
9. ë§ˆíƒœë³µìŒ 18ì¥ 20ì ˆ| ë‘ì„¸ ì‚¬ëŒì´ ë‚´ ì´ë¦„ìœ¼ë¡œ ëª¨ì¸ ê³³ì—ëŠ” ë‚˜ë„ ê·¸ë“¤ ì¤‘ì— ìˆëŠë‹ˆë¼ 
10. íˆë¸Œë¦¬ì„œ 10ì¥ 24-25ì ˆ| ì„œë¡œ ëŒì•„ë³´ì•„ ì‚¬ë‘ê³¼ ì„ í–‰ì„ ê²©ë ¤í•˜ë©° ëª¨ì´ê¸°ë¥¼ íí•˜ëŠ” ì–´ë–¤ ì‚¬ëŒë“¤ì˜ ìŠµê´€ê³¼ ê°™ì´ í•˜ì§€ ë§ê³  ì˜¤ì§ ê¶Œí•˜ì—¬ ê·¸ ë‚ ì´ ê°€ê¹Œì›€ì„ ë³¼ìˆ˜ë¡ ë”ìš± ê·¸ë¦¬í•˜ì 
11. ë§ˆíƒœë³µìŒ 4ì¥ 19ì ˆ| ë§ì”€í•˜ì‹œë˜ ë‚˜ë¥¼ ë”°ë¼ì˜¤ë¼ ë‚´ê°€ ë„ˆí¬ë¥¼ ì‚¬ëŒì„ ë‚šëŠ” ì–´ë¶€ê°€ ë˜ê²Œ í•˜ë¦¬ë¼ í•˜ì‹œë‹ˆ 
12. ë¡œë§ˆì„œ 1ì¥ 16ì ˆ| ë‚´ê°€ ë³µìŒì„ ë¶€ë„ëŸ¬ì›Œí•˜ì§€ ì•„ë‹ˆí•˜ë…¸ë‹ˆ ì´ ë³µìŒì€ ëª¨ë“  ë¯¿ëŠ” ìì—ê²Œ êµ¬ì›ì„ ì£¼ì‹œëŠ” í•˜ë‚˜ë‹˜ì˜ ëŠ¥ë ¥ì´ ë¨ì´ë¼ ë¨¼ì €ëŠ” ìœ ëŒ€ì¸ì—ê²Œìš” ê·¸ë¦¬ê³  í—¬ë¼ì¸ì—ê²Œë¡œë‹¤ 
13. ë¡œë§ˆì„œ 3ì¥ 23ì ˆ| ëª¨ë“  ì‚¬ëŒì´ ì£„ë¥¼ ë²”í•˜ì˜€ìœ¼ë§¤ í•˜ë‚˜ë‹˜ì˜ ì˜ê´‘ì— ì´ë¥´ì§€ ëª»í•˜ë”ë‹ˆ 
14. ì´ì‚¬ì•¼ 53ì¥ 6ì ˆ| ìš°ë¦¬ëŠ” ë‹¤ ì–‘ ê°™ì•„ì„œ ê·¸ë¦‡ í–‰í•˜ì—¬ ê°ê¸° ì œ ê¸¸ë¡œ ê°”ê±°ëŠ˜ ì—¬í˜¸ì™€ê»˜ì„œëŠ” ìš°ë¦¬ ëª¨ë‘ì˜ ì£„ì•…ì„ ê·¸ì—ê²Œ ë‹´ë‹¹ì‹œí‚¤ì…¨ë„ë‹¤ 
15. ë¡œë§ˆì„œ 6ì¥ 23ì ˆ| ì£„ì˜ ì‚¯ì€ ì‚¬ë§ì´ìš” í•˜ë‚˜ë‹˜ì˜ ì€ì‚¬ëŠ” ê·¸ë¦¬ìŠ¤ë„ ì˜ˆìˆ˜ ìš°ë¦¬ ì£¼ ì•ˆì— ìˆëŠ” ì˜ìƒì´ë‹ˆë¼ 
16. íˆë¸Œë¦¬ì„œ 9ì¥ 27ì ˆ| í•œë²ˆ ì£½ëŠ” ê²ƒì€ ì‚¬ëŒì—ê²Œ ì •í•´ì§„ ê²ƒì´ìš” ê·¸ í›„ì—ëŠ” ì‹¬íŒì´ ìˆìœ¼ë¦¬ë‹ˆ 
17 ë¡œë§ˆì„œ 5ì¥ 8ì ˆ| ìš°ë¦¬ê°€ ì•„ì§ ì£„ì¸ ë˜ì—ˆì„ ë•Œì— ê·¸ë¦¬ìŠ¤ë„ê»˜ì„œ ìš°ë¦¬ë¥¼ ìœ„í•˜ì—¬ ì£½ìœ¼ì‹¬ìœ¼ë¡œ í•˜ë‚˜ë‹˜ê»˜ì„œ ìš°ë¦¬ì— ëŒ€í•œ ìê¸°ì˜ ì‚¬ë‘ì„ í™•ì¦í•˜ì…¨ëŠë‹ˆë¼ 
18. ë² ë“œë¡œì „ì„œ 3ì¥ 18ì ˆ| ê·¸ë¦¬ìŠ¤ë„ê»˜ì„œë„ ë‹¨ë²ˆì— ì£„ë¥¼ ìœ„í•˜ì—¬ ì£½ìœ¼ì‚¬ ì˜ì¸ìœ¼ë¡œì„œ ë¶ˆì˜í•œ ìë¥¼ ëŒ€ì‹ í•˜ì…¨ìœ¼ë‹ˆ ì´ëŠ” ìš°ë¦¬ë¥¼ í•˜ë‚˜ë‹˜ ì•ìœ¼ë¡œ ì¸ë„í•˜ë ¤ í•˜ì‹¬ì´ë¼ ìœ¡ì²´ë¡œëŠ” ì£½ì„ì„ ë‹¹í•˜ì‹œê³  ì˜ìœ¼ë¡œëŠ” ì‚´ë¦¬ì‹¬ì„ ë°›ìœ¼ì…¨ìœ¼ë‹ˆ 
19. ì—ë² ì†Œì„œ 2ì¥ 8-9ì ˆ| ë„ˆí¬ëŠ” ê·¸ ì€í˜œì— ì˜í•˜ì—¬ ë¯¿ìŒìœ¼ë¡œ ë§ë¯¸ì•”ì•„ êµ¬ì›ì„ ë°›ì•˜ìœ¼ë‹ˆ ì´ê²ƒì€ ë„ˆí¬ì—ê²Œì„œ ë‚œ ê²ƒì´ ì•„ë‹ˆìš” í•˜ë‚˜ë‹˜ì˜ ì„ ë¬¼ì´ë¼ í–‰ìœ„ì—ì„œ ë‚œ ê²ƒì´ ì•„ë‹ˆë‹ˆ ì´ëŠ” ëˆ„êµ¬ë“ ì§€ ìë‘í•˜ì§€ ëª»í•˜ê²Œ í•¨ì´ë¼ 
20. ë””ë„ì„œ 3ì¥ 5ì ˆ| ìš°ë¦¬ë¥¼ êµ¬ì›í•˜ì‹œë˜ ìš°ë¦¬ê°€ í–‰í•œ ë°” ì˜ë¡œìš´ í–‰ìœ„ë¡œ ë§ë¯¸ì•”ì§€ ì•„ë‹ˆí•˜ê³  ì˜¤ì§ ê·¸ì˜ ê¸íœ¼í•˜ì‹¬ì„ ë”°ë¼ ì¤‘ìƒì˜ ì”»ìŒê³¼ ì„±ë ¹ì˜ ìƒˆë¡­ê²Œ í•˜ì‹¬ìœ¼ë¡œ í•˜ì…¨ë‚˜ë‹ˆ 
21. ìš”í•œë³µìŒ 1ì¥ 12ì ˆ| ì˜ì ‘í•˜ëŠ” ì ê³§ ê·¸ ì´ë¦„ì„ ë¯¿ëŠ” ìë“¤ì—ê²ŒëŠ” í•˜ë‚˜ë‹˜ì˜ ìë…€ê°€ ë˜ëŠ” ê¶Œì„¸ë¥¼ ì£¼ì…¨ìœ¼ë‹ˆ 
22. ìš”í•œê³„ì‹œë¡ 3ì¥ 20ì ˆ| ë³¼ì§€ì–´ë‹¤ ë‚´ê°€ ë¬¸ ë°–ì— ì„œì„œ ë‘ë“œë¦¬ë…¸ë‹ˆ ëˆ„êµ¬ë“ ì§€ ë‚´ ìŒì„±ì„ ë“£ê³  ë¬¸ì„ ì—´ë©´ ë‚´ê°€ ê·¸ì—ê²Œë¡œ ë“¤ì–´ê°€ ê·¸ì™€ ë”ë¶ˆì–´ ë¨¹ê³  ê·¸ëŠ” ë‚˜ì™€ ë”ë¶ˆì–´ ë¨¹ìœ¼ë¦¬ë¼ 
23. ìš”í•œì¼ì„œ 5ì¥ 13ì ˆ| ë‚´ê°€ í•˜ë‚˜ë‹˜ì˜ ì•„ë“¤ì˜ ì´ë¦„ì„ ë¯¿ëŠ” ë„ˆí¬ì—ê²Œ ì´ê²ƒì„ ì“°ëŠ” ê²ƒì€ ë„ˆí¬ë¡œ í•˜ì—¬ê¸ˆ ë„ˆí¬ì—ê²Œ ì˜ìƒì´ ìˆìŒì„ ì•Œê²Œ í•˜ë ¤ í•¨ì´ë¼ 
24. ìš”í•œë³µìŒ 5ì¥ 24ì ˆ| ë‚´ê°€ ì§„ì‹¤ë¡œ ì§„ì‹¤ë¡œ ë„ˆí¬ì—ê²Œ ì´ë¥´ë…¸ë‹ˆ ë‚´ ë§ì„ ë“£ê³  ë˜ ë‚˜ ë³´ë‚´ì‹  ì´ë¥¼ ë¯¿ëŠ” ìëŠ” ì˜ìƒì„ ì–»ì—ˆê³  ì‹¬íŒì— ì´ë¥´ì§€ ì•„ë‹ˆí•˜ë‚˜ë‹ˆ ì‚¬ë§ì—ì„œ ìƒëª…ìœ¼ë¡œ ì˜®ê²¼ëŠë‹ˆë¼ 
25. ê³ ë¦°ë„ì „ì„œ 3ì¥ 16ì ˆ| ë„ˆí¬ëŠ” ë„ˆí¬ê°€ í•˜ë‚˜ë‹˜ì˜ ì„±ì „ì¸ ê²ƒê³¼ í•˜ë‚˜ë‹˜ì˜ ì„±ë ¹ì´ ë„ˆí¬ ì•ˆì— ê³„ì‹œëŠ” ê²ƒì„ ì•Œì§€ ëª»í•˜ëŠëƒ 
26. ê³ ë¦°ë„ì „ì„œ 2ì¥ 12ì ˆ| ìš°ë¦¬ê°€ ì„¸ìƒì˜ ì˜ì„ ë°›ì§€ ì•„ë‹ˆí•˜ê³  ì˜¤ì§ í•˜ë‚˜ë‹˜ìœ¼ë¡œë¶€í„° ì˜¨ ì˜ì„ ë°›ì•˜ìœ¼ë‹ˆ ì´ëŠ” ìš°ë¦¬ë¡œ í•˜ì—¬ê¸ˆ í•˜ë‚˜ë‹˜ê»˜ì„œ ìš°ë¦¬ì—ê²Œ ì€í˜œë¡œ ì£¼ì‹  ê²ƒë“¤ì„ ì•Œê²Œ í•˜ë ¤ í•˜ì‹¬ì´ë¼ 
27. ì´ì‚¬ì•¼ 41ì¥ 10ì ˆ| ë‘ë ¤ì›Œí•˜ì§€ ë§ë¼ ë‚´ê°€ ë„ˆì™€ í•¨ê»˜ í•¨ì´ë¼ ë†€ë¼ì§€ ë§ë¼ ë‚˜ëŠ” ë„¤ í•˜ë‚˜ë‹˜ì´ ë¨ì´ë¼ ë‚´ê°€ ë„ˆë¥¼ êµ³ì„¸ê²Œ í•˜ë¦¬ë¼ ì°¸ìœ¼ë¡œ ë„ˆë¥¼ ë„ì™€ ì£¼ë¦¬ë¼ ì°¸ìœ¼ë¡œ ë‚˜ì˜ ì˜ë¡œìš´ ì˜¤ë¥¸ì†ìœ¼ë¡œ ë„ˆë¥¼ ë¶™ë“¤ë¦¬ë¼ 
28. ë¹Œë¦½ë³´ì„œ 4ì¥ 13ì ˆ| ë‚´ê²Œ ëŠ¥ë ¥ ì£¼ì‹œëŠ” ì ì•ˆì—ì„œ ë‚´ê°€ ëª¨ë“  ê²ƒì„ í•  ìˆ˜ ìˆëŠë‹ˆë¼ 
29. ì˜ˆë ˆë¯¸ì•¼ì• ê°€ 3ì¥ 22-23ì ˆ| ì—¬í˜¸ì™€ì˜ ì¸ìì™€ ê¸íœ¼ì´ ë¬´ê¶í•˜ì‹œë¯€ë¡œ ìš°ë¦¬ê°€ ì§„ë©¸ë˜ì§€ ì•„ë‹ˆí•¨ì´ë‹ˆì´ë‹¤ ì´ê²ƒë“¤ì´ ì•„ì¹¨ë§ˆë‹¤ ìƒˆë¡œìš°ë‹ˆ ì£¼ì˜ ì„±ì‹¤í•˜ì‹¬ì´ í¬ì‹œë„ì†Œì´ë‹¤ 
30. ë¯¼ìˆ˜ê¸° 23ì¥ 19ì ˆ| í•˜ë‚˜ë‹˜ì€ ì‚¬ëŒì´ ì•„ë‹ˆì‹œë‹ˆ ê±°ì§“ë§ì„ í•˜ì§€ ì•Šìœ¼ì‹œê³  ì¸ìƒì´ ì•„ë‹ˆì‹œë‹ˆ í›„íšŒê°€ ì—†ìœ¼ì‹œë„ë‹¤ ì–´ì°Œ ê·¸ ë§ì”€í•˜ì‹  ë°”ë¥¼ í–‰í•˜ì§€ ì•Šìœ¼ì‹œë©° í•˜ì‹  ë§ì”€ì„ ì‹¤í–‰í•˜ì§€ ì•Šìœ¼ì‹œë´ 
31. ì´ì‚¬ì•¼ 26ì¥ 3ì ˆ| ì£¼ê»˜ì„œ ì‹¬ì§€ê°€ ê²¬ê³ í•œ ìë¥¼ í‰ê°•í•˜ê³  í‰ê°•í•˜ë„ë¡ ì§€í‚¤ì‹œë¦¬ë‹ˆ ì´ëŠ” ê·¸ê°€ ì£¼ë¥¼ ì‹ ë¢°í•¨ì´ë‹ˆì´ë‹¤ 
32. ë² ë“œë¡œì „ì„œ 5ì¥ 7ì ˆ| ë„ˆí¬ ì—¼ë ¤ë¥¼ ë‹¤ ì£¼ê»˜ ë§¡ê¸°ë¼ ì´ëŠ” ê·¸ê°€ ë„ˆí¬ë¥¼ ëŒë³´ì‹¬ì´ë¼ 
33. ë¡œë§ˆì„œ 8ì¥ 32ì ˆ| ìê¸° ì•„ë“¤ì„ ì•„ë¼ì§€ ì•„ë‹ˆí•˜ì‹œê³  ìš°ë¦¬ ëª¨ë“  ì‚¬ëŒì„ ìœ„í•˜ì—¬ ë‚´ì£¼ì‹  ì´ê°€ ì–´ì°Œ ê·¸ ì•„ë“¤ê³¼ í•¨ê»˜ ëª¨ë“  ê²ƒì„ ìš°ë¦¬ì—ê²Œ ì£¼ì‹œì§€ ì•„ë‹ˆí•˜ê² ëŠëƒ 
34. ë¹Œë¦½ë³´ì„œ 4ì¥ 19ì ˆ| ë‚˜ì˜ í•˜ë‚˜ë‹˜ì´ ê·¸ë¦¬ìŠ¤ë„ ì˜ˆìˆ˜ ì•ˆì—ì„œ ì˜ê´‘ ê°€ìš´ë° ê·¸ í’ì„±í•œ ëŒ€ë¡œ ë„ˆí¬ ëª¨ë“  ì“¸ ê²ƒì„ ì±„ìš°ì‹œë¦¬ë¼ 
35. íˆë¸Œë¦¬ì„œ 2ì¥ 18ì ˆ| ê·¸ê°€ ì‹œí—˜ì„ ë°›ì•„ ê³ ë‚œì„ ë‹¹í•˜ì…¨ì€ì¦‰ ì‹œí—˜ ë°›ëŠ” ìë“¤ì„ ëŠ¥íˆ ë„ìš°ì‹¤ ìˆ˜ ìˆëŠë‹ˆë¼ 
36. ì‹œí¸ 119í¸ 9-11ì ˆ| ì²­ë…„ì´ ë¬´ì—‡ìœ¼ë¡œ ê·¸ì˜ í–‰ì‹¤ì„ ê¹¨ë—í•˜ê²Œ í•˜ë¦¬ì´ê¹Œ ì£¼ì˜ ë§ì”€ë§Œ ì§€í‚¬ ë”°ë¦„ì´ë‹ˆì´ë‹¤ ë‚´ê°€ ì£¼ê»˜ ë²”ì£„í•˜ì§€ ì•„ë‹ˆí•˜ë ¤ í•˜ì—¬ ì£¼ì˜ ë§ì”€ì„ ë‚´ ë§ˆìŒì— ë‘ì—ˆë‚˜ì´ë‹¤ 
37. ë§ˆíƒœë³µìŒ 6ì¥ 33ì ˆ| ê·¸ëŸ°ì¦‰ ë„ˆí¬ëŠ” ë¨¼ì € ê·¸ì˜ ë‚˜ë¼ì™€ ê·¸ì˜ ì˜ë¥¼ êµ¬í•˜ë¼ ê·¸ë¦¬í•˜ë©´ ì´ ëª¨ë“  ê²ƒì„ ë„ˆí¬ì—ê²Œ ë”í•˜ì‹œë¦¬ë¼ 
38. ëˆ„ê°€ë³µìŒ 9ì¥ 23ì ˆ| ë˜ ë¬´ë¦¬ì—ê²Œ ì´ë¥´ì‹œë˜ ì•„ë¬´ë“ ì§€ ë‚˜ë¥¼ ë”°ë¼ì˜¤ë ¤ê±°ë“  ìê¸°ë¥¼ ë¶€ì¸í•˜ê³  ë‚ ë§ˆë‹¤ ì œ ì‹­ìê°€ë¥¼ ì§€ê³  ë‚˜ë¥¼ ë”°ë¥¼ ê²ƒì´ë‹ˆë¼ 
39. ìš”í•œì¼ì„œ 2ì¥ 15-16ì ˆ| ì´ ì„¸ìƒì´ë‚˜ ì„¸ìƒì— ìˆëŠ” ê²ƒë“¤ì„ ì‚¬ë‘í•˜ì§€ ë§ë¼ ëˆ„êµ¬ë“ ì§€ ì„¸ìƒì„ ì‚¬ë‘í•˜ë©´ ì•„ë²„ì§€ì˜ ì‚¬ë‘ì´ ê·¸ ì•ˆì— ìˆì§€ ì•„ë‹ˆí•˜ë‹ˆ ì´ëŠ” ì„¸ìƒì— ìˆëŠ” ëª¨ë“  ê²ƒì´ ìœ¡ì‹ ì˜ ì •ìš•ê³¼ ì•ˆëª©ì˜ ì •ìš•ê³¼ ì´ìƒì˜ ìë‘ì´ë‹ˆ ë‹¤ ì•„ë²„ì§€ê»˜ë¡œë¶€í„° ì˜¨ ê²ƒì´ ì•„ë‹ˆìš” ì„¸ìƒìœ¼ë¡œë¶€í„° ì˜¨ ê²ƒì´ë¼ 
40. ë¡œë§ˆì„œ 12ì¥ 2ì ˆ| ë„ˆí¬ëŠ” ì´ ì„¸ëŒ€ë¥¼ ë³¸ë°›ì§€ ë§ê³  ì˜¤ì§ ë§ˆìŒì„ ìƒˆë¡­ê²Œ í•¨ìœ¼ë¡œ ë³€í™”ë¥¼ ë°›ì•„ í•˜ë‚˜ë‹˜ì˜ ì„ í•˜ì‹œê³  ê¸°ë»í•˜ì‹œê³  ì˜¨ì „í•˜ì‹  ëœ»ì´ ë¬´ì—‡ì¸ì§€ ë¶„ë³„í•˜ë„ë¡ í•˜ë¼ 
41. ê³ ë¦°ë„ì „ì„œ 15ì¥ 58ì ˆ| ê·¸ëŸ¬ë¯€ë¡œ ë‚´ ì‚¬ë‘í•˜ëŠ” í˜•ì œë“¤ì•„ ê²¬ì‹¤í•˜ë©° í”ë“¤ë¦¬ì§€ ë§ê³  í•­ìƒ ì£¼ì˜ ì¼ì— ë”ìš± í˜ì“°ëŠ” ìë“¤ì´ ë˜ë¼ ì´ëŠ” ë„ˆí¬ ìˆ˜ê³ ê°€ ì£¼ ì•ˆì—ì„œ í—›ë˜ì§€ ì•Šì€ ì¤„ ì•ì´ë¼ 
42. íˆë¸Œë¦¬ì„œ 12ì¥ 3ì ˆ| ë„ˆí¬ê°€ í”¼ê³¤í•˜ì—¬ ë‚™ì‹¬í•˜ì§€ ì•Šê¸° ìœ„í•˜ì—¬ ì£„ì¸ë“¤ì´ ì´ê°™ì´ ìê¸°ì—ê²Œ ê±°ì—­í•œ ì¼ì„ ì°¸ìœ¼ì‹  ì´ë¥¼ ìƒê°í•˜ë¼ 
43. ë§ˆê°€ë³µìŒ 10ì¥ 45ì ˆ| ì¸ìê°€ ì˜¨ ê²ƒì€ ì„¬ê¹€ì„ ë°›ìœ¼ë ¤ í•¨ì´ ì•„ë‹ˆë¼ ë„ë¦¬ì–´ ì„¬ê¸°ë ¤ í•˜ê³  ìê¸° ëª©ìˆ¨ì„ ë§ì€ ì‚¬ëŒì˜ ëŒ€ì†ë¬¼ë¡œ ì£¼ë ¤ í•¨ì´ë‹ˆë¼ 
44. ê³ ë¦°ë„í›„ì„œ 4ì¥ 5ì ˆ| ìš°ë¦¬ëŠ” ìš°ë¦¬ë¥¼ ì „íŒŒí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì˜¤ì§ ê·¸ë¦¬ìŠ¤ë„ ì˜ˆìˆ˜ì˜ ì£¼ ë˜ì‹  ê²ƒê³¼ ë˜ ì˜ˆìˆ˜ë¥¼ ìœ„í•˜ì—¬ ìš°ë¦¬ê°€ ë„ˆí¬ì˜ ì¢… ëœ ê²ƒì„ ì „íŒŒí•¨ì´ë¼ 
45. ì ì–¸ 3ì¥ 9-10ì ˆ| ë„¤ ì¬ë¬¼ê³¼ ë„¤ ì†Œì‚°ë¬¼ì˜ ì²˜ìŒ ìµì€ ì—´ë§¤ë¡œ ì—¬í˜¸ì™€ë¥¼ ê³µê²½í•˜ë¼ ê·¸ë¦¬í•˜ë©´ ë„¤ ì°½ê³ ê°€ ê°€ë“íˆ ì°¨ê³  ë„¤ í¬ë„ì¦™ í‹€ì— ìƒˆ í¬ë„ì¦™ì´ ë„˜ì¹˜ë¦¬ë¼ 
46. ê³ ë¦°ë„í›„ì„œ 9ì¥ 6-7ì ˆ| ì´ê²ƒì´ ê³§ ì ê²Œ ì‹¬ëŠ” ìëŠ” ì ê²Œ ê±°ë‘ê³  ë§ì´ ì‹¬ëŠ” ìëŠ” ë§ì´ ê±°ë‘”ë‹¤ í•˜ëŠ” ë§ì´ë¡œë‹¤ ê°ê° ê·¸ ë§ˆìŒì— ì •í•œ ëŒ€ë¡œ í•  ê²ƒì´ìš” ì¸ìƒ‰í•¨ìœ¼ë¡œë‚˜ ì–µì§€ë¡œ í•˜ì§€ ë§ì§€ë‹ˆ í•˜ë‚˜ë‹˜ì€ ì¦ê²¨ ë‚´ëŠ” ìë¥¼ ì‚¬ë‘í•˜ì‹œëŠë‹ˆë¼ 
47. ì‚¬ë„í–‰ì „ 1ì¥ 8ì ˆ| ì˜¤ì§ ì„±ë ¹ì´ ë„ˆí¬ì—ê²Œ ì„í•˜ì‹œë©´ ë„ˆí¬ê°€ ê¶ŒëŠ¥ì„ ë°›ê³  ì˜ˆë£¨ì‚´ë ˜ê³¼ ì˜¨ ìœ ëŒ€ì™€ ì‚¬ë§ˆë¦¬ì•„ì™€ ë•… ëê¹Œì§€ ì´ë¥´ëŸ¬ ë‚´ ì¦ì¸ì´ ë˜ë¦¬ë¼ í•˜ì‹œë‹ˆë¼ 
48. ë§ˆíƒœë³µìŒ 28ì¥ 19-20ì ˆ| ê·¸ëŸ¬ë¯€ë¡œ ë„ˆí¬ëŠ” ê°€ì„œ ëª¨ë“  ë¯¼ì¡±ì„ ì œìë¡œ ì‚¼ì•„ ì•„ë²„ì§€ì™€ ì•„ë“¤ê³¼ ì„±ë ¹ì˜ ì´ë¦„ìœ¼ë¡œ ì„¸ë¡€ë¥¼ ë² í’€ê³  ë‚´ê°€ ë„ˆí¬ì—ê²Œ ë¶„ë¶€í•œ ëª¨ë“  ê²ƒì„ ê°€ë¥´ì³ ì§€í‚¤ê²Œ í•˜ë¼ ë³¼ì§€ì–´ë‹¤ ë‚´ê°€ ì„¸ìƒ ëë‚ ê¹Œì§€ ë„ˆí¬ì™€ í•­ìƒ í•¨ê»˜ ìˆìœ¼ë¦¬ë¼ í•˜ì‹œë‹ˆë¼ 
49. ìš”í•œë³µìŒ 13ì¥ 34-35ì ˆ| ìƒˆ ê³„ëª…ì„ ë„ˆí¬ì—ê²Œ ì£¼ë…¸ë‹ˆ ì„œë¡œ ì‚¬ë‘í•˜ë¼ ë‚´ê°€ ë„ˆí¬ë¥¼ ì‚¬ë‘í•œ ê²ƒ ê°™ì´ ë„ˆí¬ë„ ì„œë¡œ ì‚¬ë‘í•˜ë¼ ë„ˆí¬ê°€ ì„œë¡œ ì‚¬ë‘í•˜ë©´ ì´ë¡œì¨ ëª¨ë“  ì‚¬ëŒì´ ë„ˆí¬ê°€ ë‚´ ì œìì¸ ì¤„ ì•Œë¦¬ë¼ 
50. ìš”í•œì¼ì„œ 3ì¥ 18ì ˆ| ìë…€ë“¤ì•„ ìš°ë¦¬ê°€ ë§ê³¼ í˜€ë¡œë§Œ ì‚¬ë‘í•˜ì§€ ë§ê³  í–‰í•¨ê³¼ ì§„ì‹¤í•¨ìœ¼ë¡œ í•˜ì 
51. ë¹Œë¦½ë³´ì„œ 2ì¥ 3-4ì ˆ| ì•„ë¬´ ì¼ì—ë“ ì§€ ë‹¤íˆ¼ì´ë‚˜ í—ˆì˜ìœ¼ë¡œ í•˜ì§€ ë§ê³  ì˜¤ì§ ê²¸ì†í•œ ë§ˆìŒìœ¼ë¡œ ê°ê° ìê¸°ë³´ë‹¤ ë‚¨ì„ ë‚«ê²Œ ì—¬ê¸°ê³  ê°ê° ìê¸° ì¼ì„ ëŒë³¼ë¿ë”ëŸ¬ ë˜í•œ ê°ê° ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ ì¼ì„ ëŒë³´ì•„ ë‚˜ì˜ ê¸°ì¨ì„ ì¶©ë§Œí•˜ê²Œ í•˜ë¼ 
52. ë² ë“œë¡œì „ì„œ 5ì¥ 5-6ì ˆ| ì Šì€ ìë“¤ì•„ ì´ì™€ ê°™ì´ ì¥ë¡œë“¤ì—ê²Œ ìˆœì¢…í•˜ê³  ë‹¤ ì„œë¡œ ê²¸ì†ìœ¼ë¡œ í—ˆë¦¬ë¥¼ ë™ì´ë¼ í•˜ë‚˜ë‹˜ì€ êµë§Œí•œ ìë¥¼ ëŒ€ì í•˜ì‹œë˜ ê²¸ì†í•œ ìë“¤ì—ê²ŒëŠ” ì€í˜œë¥¼ ì£¼ì‹œëŠë‹ˆë¼ ê·¸ëŸ¬ë¯€ë¡œ í•˜ë‚˜ë‹˜ì˜ ëŠ¥í•˜ì‹  ì† ì•„ë˜ì—ì„œ ê²¸ì†í•˜ë¼ ë•Œê°€ ë˜ë©´ ë„ˆí¬ë¥¼ ë†’ì´ì‹œë¦¬ë¼ 
53. ì—ë² ì†Œì„œ 5ì¥ 3ì ˆ| ìŒí–‰ê³¼ ì˜¨ê°– ë”ëŸ¬ìš´ ê²ƒê³¼ íƒìš•ì€ ë„ˆí¬ ì¤‘ì—ì„œ ê·¸ ì´ë¦„ì¡°ì°¨ë„ ë¶€ë¥´ì§€ ë§ë¼ ì´ëŠ” ì„±ë„ì—ê²Œ ë§ˆë•…í•œ ë°”ë‹ˆë¼ 
54. ë² ë“œë¡œì „ì„œ 2ì¥ 11ì ˆ| ì‚¬ë‘í•˜ëŠ” ìë“¤ì•„ ê±°ë¥˜ë¯¼ê³¼ ë‚˜ê·¸ë„¤ ê°™ì€ ë„ˆí¬ë¥¼ ê¶Œí•˜ë…¸ë‹ˆ ì˜í˜¼ì„ ê±°ìŠ¬ëŸ¬ ì‹¸ìš°ëŠ” ìœ¡ì²´ì˜ ì •ìš•ì„ ì œì–´í•˜ë¼ 
55. ë ˆìœ„ê¸° 19ì¥ 11ì ˆ| ë„ˆí¬ëŠ” ë„ë‘‘ì§ˆí•˜ì§€ ë§ë©° ì†ì´ì§€ ë§ë©° ì„œë¡œ ê±°ì§“ë§í•˜ì§€ ë§ë©° 
56. ì‚¬ë„í–‰ì „ 24ì¥ 16ì ˆ| ì´ê²ƒìœ¼ë¡œ ë§ë¯¸ì•”ì•„ ë‚˜ë„ í•˜ë‚˜ë‹˜ê³¼ ì‚¬ëŒì— ëŒ€í•˜ì—¬ í•­ìƒ ì–‘ì‹¬ì— ê±°ë¦¬ë‚Œì´ ì—†ê¸°ë¥¼ í˜ì“°ë‚˜ì´ë‹¤ 
57. íˆë¸Œë¦¬ì„œ 11ì¥ 6ì ˆ| ë¯¿ìŒì´ ì—†ì´ëŠ” í•˜ë‚˜ë‹˜ì„ ê¸°ì˜ì‹œê²Œ í•˜ì§€ ëª»í•˜ë‚˜ë‹ˆ í•˜ë‚˜ë‹˜ê»˜ ë‚˜ì•„ê°€ëŠ” ìëŠ” ë°˜ë“œì‹œ ê·¸ê°€ ê³„ì‹  ê²ƒê³¼ ë˜í•œ ê·¸ê°€ ìê¸°ë¥¼ ì°¾ëŠ” ìë“¤ì—ê²Œ ìƒ ì£¼ì‹œëŠ” ì´ì‹¬ì„ ë¯¿ì–´ì•¼ í• ì§€ë‹ˆë¼ 
58. ë¡œë§ˆì„œ 4ì¥ 20-21ì ˆ| ë¯¿ìŒì´ ì—†ì–´ í•˜ë‚˜ë‹˜ì˜ ì•½ì†ì„ ì˜ì‹¬í•˜ì§€ ì•Šê³  ë¯¿ìŒìœ¼ë¡œ ê²¬ê³ í•˜ì—¬ì ¸ì„œ í•˜ë‚˜ë‹˜ê»˜ ì˜ê´‘ì„ ëŒë¦¬ë©° ì•½ì†í•˜ì‹  ê·¸ê²ƒì„ ë˜í•œ ëŠ¥íˆ ì´ë£¨ì‹¤ ì¤„ì„ í™•ì‹ í•˜ì˜€ìœ¼ë‹ˆ 
59. ê°ˆë¼ë””ì•„ì„œ 6ì¥ 9-10ì ˆ| ìš°ë¦¬ê°€ ì„ ì„ í–‰í•˜ë˜ ë‚™ì‹¬í•˜ì§€ ë§ì§€ë‹ˆ í¬ê¸°í•˜ì§€ ì•„ë‹ˆí•˜ë©´ ë•Œê°€ ì´ë¥´ë§¤ ê±°ë‘ë¦¬ë¼ ê·¸ëŸ¬ë¯€ë¡œ ìš°ë¦¬ëŠ” ê¸°íšŒ ìˆëŠ” ëŒ€ë¡œ ëª¨ë“  ì´ì—ê²Œ ì°©í•œ ì¼ì„ í•˜ë˜ ë”ìš± ë¯¿ìŒì˜ ê°€ì •ë“¤ì—ê²Œ í• ì§€ë‹ˆë¼ 
60. ë§ˆíƒœë³µìŒ 5ì¥ 16ì ˆ| ì´ê°™ì´ ë„ˆí¬ ë¹›ì´ ì‚¬ëŒ ì•ì— ë¹„ì¹˜ê²Œ í•˜ì—¬ ê·¸ë“¤ë¡œ ë„ˆí¬ ì°©í•œ í–‰ì‹¤ì„ ë³´ê³  í•˜ëŠ˜ì— ê³„ì‹  ë„ˆí¬ ì•„ë²„ì§€ê»˜ ì˜ê´‘ì„ ëŒë¦¬ê²Œ í•˜ë¼ 
`;

function parseVerses(str) {
  return str.trim().split('\n').map((line, i) => {
    const [title, text] = line.split('|').map(s => s.trim());
    return { id: i, title, text, favorite: false };
  });
}

// ì´ˆê¸°í™”
let originalVerses = loadSavedVerses() || parseVerses(originalVersesStr);
let favoriteIds = JSON.parse(localStorage.getItem(STORAGE_KEY_FAVORITES) || '[]');

// favorite ìƒíƒœ ë³µì›
originalVerses = originalVerses.map((v, i) => ({
  ...v,
  id: i,
  favorite: favoriteIds.includes(i)
}));

let verses = [...originalVerses];
let current = 0;
let isHidden = false;
let isRandomMode = false;
let showOnlyFavorites = false;




function renderVerse() {

  const verse = verses[current];
  if (!verse) return;
  document.getElementById('verseTitle').textContent = verse.title;
  document.getElementById('verseText').textContent = verse.text;
  document.getElementById('favoriteCheckbox').checked = verse.favorite;
}

function applyAnimation(direction = 'left') {
  const verseBoxes = document.querySelectorAll('.verse-box, .favorite-box');
  verseBoxes.forEach((box) => {
    box.classList.remove('animate-left', 'animate-right'); // ì´ˆê¸°í™”
    void box.offsetWidth; // ë¦¬í”Œë¡œìš° ê°•ì œ â†’ ì—°ì† í´ë¦­ ì‹œ ì• ë‹ˆë©”ì´ì…˜ ì¬ì‹¤í–‰ë¨
    box.classList.add(direction === 'left' ? 'animate-left' : 'animate-right');
  });
}

function prevVerse() {
applyAnimation('right');
  current = (current - 1 + verses.length) % verses.length;
  renderVerse();
}

function nextVerse() {
    applyAnimation('left');
  current = (current + 1) % verses.length;
  renderVerse();
}

function toggleVerse() {
  isHidden = !isHidden;
  document.getElementById("toggleButton").innerText = isHidden ? "ë³´ì—¬" : "ìˆ¨ê²¨";

  const textEl = document.getElementById("verseText");

  if (isHidden) {
    textEl.style.color = "#1e1e1e"; // ë°°ê²½ìƒ‰ê³¼ ê°™ê²Œ ì„¤ì •í•˜ì—¬ ì•ˆ ë³´ì´ê²Œ
  } else {
    textEl.style.color = "#FFF"; // ë³¸ë¬¸ ê¸€ì ì›ë˜ ìƒ‰ìƒ
  }

  renderVerse();
}

function toggleMode() {
  const modeButton = document.getElementById('modeToggleButton');

  if (!isRandomMode) {
    let shuffled;
    let attempts = 0;
    do {
      shuffled = [...verses];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      attempts++;
    } while (arraysAreEqual(shuffled, verses) && attempts < 10);

    verses = shuffled;
    isRandomMode = true;
    modeButton.textContent = "ìˆœì°¨";
  } else {
    verses = showOnlyFavorites ? originalVerses.filter(v => v.favorite) : [...originalVerses];
    isRandomMode = false;
    modeButton.textContent = "ëœë¤";
  }

  current = 0;
  renderVerse();
}

// ğŸ”§ ë°°ì—´ ë¹„êµ í•¨ìˆ˜ (ê°™ì€ ìˆœì„œì¸ì§€ í™•ì¸)
function arraysAreEqual(arr1, arr2) {
  if (arr1.length !== arr2.length) return false;
  for (let i = 0; i < arr1.length; i++) {
    if (arr1[i] !== arr2[i]) return false;
  }
  return true;
}


function updateFavorite() {
  const verse = verses[current];
  verse.favorite = document.getElementById('favoriteCheckbox').checked;

  const original = originalVerses.find(v => v.id === verse.id);
  if (original) original.favorite = verse.favorite;

  const newFavorites = originalVerses.filter(v => v.favorite).map(v => v.id);
  localStorage.setItem(STORAGE_KEY_FAVORITES, JSON.stringify(newFavorites));
}

function toggleFavoriteCheckbox() {
  const checkbox = document.getElementById('favoriteCheckbox');
  checkbox.checked = !checkbox.checked;
  updateFavorite();
}

function toggleFavorites() {
  const button = document.getElementById("favoriteToggleButton");
  showOnlyFavorites = !showOnlyFavorites;

  if (showOnlyFavorites) {
    verses = originalVerses.filter(v => v.favorite);
    button.textContent = "ëª¨ë‘";
  } else {
    verses = [...originalVerses];
    button.textContent = "ì¦ì°¾";
  }
  current = 0;
  renderVerse();
  // ì¦ê²¨ì°¾ê¸° id ë°°ì—´ ë°˜í™˜ ë° ì½˜ì†” ì¶œë ¥
  const favIds = getFavoriteIds();
  console.log(favIds);
  return favIds;
// ì¦ê²¨ì°¾ê¸° id ë°°ì—´ ë°˜í™˜ ë° ì½˜ì†” ì¶œë ¥
}

// ìŠ¤ì™€ì´í”„ ê°ì§€
let startX = 0;
let endX = 0;
const verseContainer = document.getElementById('verseContainer');
// í™”ë©´ ì „ì²´ì— ì´ë²¤íŠ¸ ì ìš©
document.addEventListener('touchstart', e => {
  if (e.target.type === 'checkbox') return;
  startX = e.touches[0].clientX;
});

document.addEventListener('touchend', e => {
  if (e.target.type === 'checkbox') return;
  endX = e.changedTouches[0].clientX;
  handleSwipe();
});

document.addEventListener('mousedown', e => {
  if (e.target.type === 'checkbox') return;
  startX = e.clientX;
});

document.addEventListener('mouseup', e => {
  if (e.target.type === 'checkbox') return;
  endX = e.clientX;
  handleSwipe();
});


// ì¦ê²¨ì°¾ê¸° ì¶”ê°€ëœ ë²ˆí˜¸(id) ë°°ì—´ ë°˜í™˜ í•¨ìˆ˜
function getFavoriteIds() {
  return originalVerses.filter(v => v.favorite).map(v => v.id);
}

let lastSwipeTime = 0;
let swipeCount = 0;

function handleSwipe() {
  const diff = endX - startX;
  const now = Date.now();

  // ì—°ì† ìŠ¤ì™€ì´í”„ ì—¬ë¶€ íŒë‹¨ (400ms ì´ë‚´ ë‘ ë²ˆ)
  if (Math.abs(diff) > 50) {
    if (now - lastSwipeTime < 400) {
      swipeCount++;
    } else {
      swipeCount = 1;
    }

    lastSwipeTime = now;

    if (swipeCount >= 2) {
      // ë‘ ë²ˆ ë¹ ë¥´ê²Œ ìŠ¤ì™€ì´í”„í•˜ë©´ 10ì¹¸ ì í”„
      if (diff > 0) {
        jumpVerse(-10); // ì˜¤ë¥¸ìª½ìœ¼ë¡œ ìŠ¤ì™€ì´í”„ = ì´ì „
      } else {
        jumpVerse(10); // ì™¼ìª½ìœ¼ë¡œ ìŠ¤ì™€ì´í”„ = ë‹¤ìŒ
      }
      swipeCount = 0; // ë¦¬ì…‹
    } else {
      // ì¼ë°˜ ìŠ¤ì™€ì´í”„
      diff > 0 ? prevVerse() : nextVerse();
    }
  }
}

function jumpVerse(step) {
  applyAnimation(step > 0 ? 'left' : 'right');
  current = (current + step + verses.length) % verses.length;
  renderVerse();
}

// í¸ì§‘
let isEditing = false;

function toggleEditMode() {
  const editContainer = document.getElementById('editContainer');
  const textarea = document.getElementById('editTextarea');
  isEditing = !isEditing;

  if (isEditing) {
    const str = originalVerses.map(v => `${v.title}| ${v.text}`).join('\n');
    textarea.value = str;
    editContainer.style.display = 'flex';
  } else {
    editContainer.style.display = 'none';
  }
}

function saveEditedVerses() {
  const editedText = document.getElementById('editTextarea').value.trim();
  const lines = editedText.split('\n').filter(line => line.trim() !== '');
  const isValid = lines.every(line => {
    const parts = line.split('|');
    return parts.length === 2 && parts[0].trim() && parts[1].trim();
  });

  if (!isValid) {
    showFormatError();
    return;
  }

  const newVerses = lines.map((line, idx) => {
    const [title, text] = line.split('|').map(str => str.trim());
    return { id: idx, title, text, favorite: false };
  });

  for (let v of newVerses) {
    const existing = originalVerses.find(o => o.title === v.title && o.text === v.text);
    if (existing) v.favorite = existing.favorite;
  }

  originalVerses = [...newVerses];
  verses = showOnlyFavorites ? originalVerses.filter(v => v.favorite) : [...originalVerses];

  // ì €ì¥
  saveVersesToStorage(originalVerses);
  localStorage.setItem(STORAGE_KEY_FAVORITES, JSON.stringify(originalVerses.filter(v => v.favorite).map(v => v.id)));

  current = 0;
  toggleEditMode();
  renderVerse();
}

function cancelEdit() {
  toggleEditMode();
}

function resetToOriginal() {
  const textarea = document.getElementById('editTextarea');
  textarea.value = originalVersesStr.trim();
}

function showFormatError() {
  if (!document.getElementById('formatErrorBox')) {
    const errorBox = document.createElement('div');
    errorBox.id = 'formatErrorBox';
    errorBox.style.position = 'fixed';
    errorBox.style.top = '50%';
    errorBox.style.left = '50%';
    errorBox.style.transform = 'translate(-50%, -50%)';
    errorBox.style.backgroundColor = '#2a2a2a';
    errorBox.style.color = '#fff';
    errorBox.style.padding = '20px';
    errorBox.style.borderRadius = '10px';
    errorBox.style.zIndex = '10';
    errorBox.style.textAlign = 'center';
    errorBox.innerHTML = `
      <p>í¸ì§‘ í˜•ì‹ì— <br>ì–´ê¸‹ë‚˜ê²Œ í¸ì§‘í•˜ì…¨ë„¤ìš”.<br>ì£„ì†¡í•˜ì§€ë§Œ ì°½ì„ ë‹«ìŠµë‹ˆë‹¤.</p>
      <button id="formatErrorOkButton" style="margin-top:15px; padding:8px 20px; border:none; border-radius:5px; background:#FFD95A; color:#121212; font-weight:bold; cursor:pointer;">í™•ì¸</button>
    `;
    document.body.appendChild(errorBox);
    document.getElementById('formatErrorOkButton').onclick = () => {
      errorBox.remove();
      toggleEditMode();
    };
  }
}

// ìµœì´ˆ ë Œë”ë§
renderVerse();


//ìŒì•…í”Œë ˆì´ì–´

  const originalVersesStr2 = originalVersesStr.trim();

  const verses2 = originalVersesStr2.split('\n').map((line, index) => {
    const [titlePart] = line.split('|');
    return {
      title: titlePart.trim(),
      url: `https://yh7004lee.github.io/mp3/${index + 1}.mp3`
    };
  });

  const audio = document.getElementById('audio');
  const progressBar = document.getElementById('progress-bar');
  const verseTitle2 = document.getElementById('verse-title');
  const playlistOverlay = document.getElementById('playlist-overlay');
  const playlistCheckboxes = document.getElementById('playlist-checkboxes');
  const audioData = verses2; // ìë™ ìƒì„±ëœ ë°ì´í„°ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©

  let currentTrack = 0;
  let selectedTracks = [];
  let playAllLoop = false;
  let selectToggle = false;

function loadAudio(index) {
  if (index >= selectedTracks.length) return;

  // í˜„ì¬ ì¬ìƒ ì¤‘ì´ë©´ ì •ì§€
  audio.pause();
  audio.currentTime = 0;

  currentTrack = index;
  const track = selectedTracks[index];
  audio.src = track.url;
  verseTitle2.textContent = track.title;
  audio.load();
}



let isPlaying = false; // í˜„ì¬ ì¬ìƒ ì¤‘ì¸ì§€ ì—¬ë¶€
let hasStarted = false; // ì„ íƒëœ íŠ¸ë™ì„ ë¡œë“œí•˜ê³  ì¬ìƒí•œ ì  ìˆëŠ”ì§€

function playAudio() {
  const toggleBtn = document.getElementById("togglePlayBtn");

  if (!isPlaying) {
    // ì²˜ìŒ ì¬ìƒì´ê±°ë‚˜, ì¼ì‹œì •ì§€ ìƒíƒœì—ì„œ ë‹¤ì‹œ ì¬ìƒ
    if (!hasStarted) {
      // ì²˜ìŒ ì¬ìƒ ì‹œ: ì„ íƒëœ íŠ¸ë™ì„ ì„¤ì •
      const checkboxes = playlistCheckboxes.querySelectorAll('input[type="checkbox"]');
      selectedTracks = [];
      checkboxes.forEach((cb, index) => {
        if (cb.checked) {
          selectedTracks.push(audioData[index]);
        }
      });

      if (selectedTracks.length === 0) {
        alert("ì¬ìƒí•  í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
        return;
      }

      currentTrack = 0;
      playAllLoop = true;
      loadAudio(currentTrack);
      hasStarted = true;
    }

    audio.play();
     syncVerseWithAudio(); // ì¬ìƒ ì‹œ ì œëª© ê¸°ë°˜ìœ¼ë¡œ ë§ì”€ ì‹±í¬
    isPlaying = true;
    toggleBtn.textContent = "ë©ˆì¶¤";
    document.getElementById("player-bar").style.display = "block";
  } else {
    // ì¬ìƒ ì¤‘ì¼ ë•Œ: ì¼ì‹œ ì •ì§€
    audio.pause();
    isPlaying = false;
    toggleBtn.textContent = "ì¬ìƒ";
  }
}

function syncVerseWithAudio() {
  const audioTitleEl = document.querySelector('#player-bar #verse-title');
  if (!audioTitleEl) return;

  const titleText = audioTitleEl.textContent || '';
  const numberMatch = titleText.match(/^(\d{1,2})\./); // ì• ìˆ«ì+ì  ë§¤ì¹­
  if (!numberMatch) return;

  const verseNumber = parseInt(numberMatch[1], 10);
  const index = verseNumber - 1;

  if (index >= 0 && index < originalVerses.length) {
    current = index;
    renderVerse(); // í™”ë©´ì˜ ë§ì”€ ì œëª©/ë‚´ìš© ì—…ë°ì´íŠ¸
  }
}

function pauseAudio() {
  audio.pause();
  audio.src = "";
  audio.load();

  progressBar.style.width = "0%";

  isPlaying = false;
  hasStarted = false;
  selectedTracks = [];
  currentTrack = 0;
  playAllLoop = false;

  const toggleBtn = document.getElementById("togglePlayBtn");
  toggleBtn.textContent = "ì¬ìƒ";
}

  function stopAll() {
  audio.pause();
  audio.src = "";
  audio.load();

  verseTitle2.textContent = "";
  progressBar.style.width = "0%";

  document.getElementById("player-bar").style.display = "none";
  document.getElementById("playlist-overlay").style.display = "none";

  // ğŸ”§ ìƒíƒœ ë³€ìˆ˜ ì´ˆê¸°í™”
  isPlaying = false;
  hasStarted = false;
  playAllLoop = false;
  selectedTracks = [];
  currentTrack = 0;

  const toggleBtn = document.getElementById("togglePlayBtn");
  toggleBtn.textContent = "ì¬ìƒ";
}

  function togglePlaylist() {
    playlistOverlay.style.display = playlistOverlay.style.display === 'block' ? 'none' : 'block';
  }

  function hidePlaylist() {
    playlistOverlay.style.display = 'none';
  }

function clearAllSelection() {
  const checkboxes = playlistCheckboxes.querySelectorAll('input[type="checkbox"]');
  checkboxes.forEach(cb => cb.checked = false);
}

// renderPlaylist ìˆ˜ì •: ë¼ë²¨ í´ë¦­ ì‹œ ìë™ ì²´í¬ ì²˜ë¦¬
function renderPlaylist() {
  playlistCheckboxes.innerHTML = '';
  audioData.forEach((item, index) => {
    const div = document.createElement('div');
    div.className = 'playlist-item';
    div.innerHTML = `
      <input type="checkbox" id="track-${index}" checked>
      <label for="track-${index}" onclick="document.getElementById('track-${index}').checked = !document.getElementById('track-${index}').checked">${item.title}</label>
    `;
    playlistCheckboxes.appendChild(div);
  });
}

function toggleSelectAll() {
  const checkboxes = document.querySelectorAll('#playlist-checkboxes input[type="checkbox"]');
  checkboxes.forEach(cb => cb.checked = true);
}

  function applySelected() {
    const checkboxes = playlistCheckboxes.querySelectorAll('input[type="checkbox"]');
    selectedTracks = [];
    checkboxes.forEach((cb, index) => {
      if (cb.checked) {
        selectedTracks.push(audioData[index]);
      }
    });
    if (selectedTracks.length > 0) {
      document.getElementById("player-bar").style.display = "block";
      loadAudio(0);
      playAudio();
      playAllLoop = true;
    }
  }






audio.addEventListener('ended', () => {
  if (playAllLoop) {
    currentTrack++;
    if (currentTrack >= selectedTracks.length) {
      currentTrack = 0; // ë°˜ë³µì¬ìƒ: ë§ˆì§€ë§‰ ê³¡ í›„ ë‹¤ì‹œ ì²« ê³¡ìœ¼ë¡œ
    }
    loadAudio(currentTrack);
    audio.play(); // ğŸ” ê³¡ ì¬ìƒ
  }
});


const audioElement = document.getElementById('audio');

audioElement.addEventListener('ended', () => {
  current = (current + 1) % verses.length; // ë‹¤ìŒ ë§ì”€ìœ¼ë¡œ ì´ë™
    syncVerseWithAudio(); // ì¬ìƒ ì‹œ ì œëª© ê¸°ë°˜ìœ¼ë¡œ ë§ì”€ ì‹±í¬
    audio.play(); // ğŸ” ê³¡ ì¬ìƒ
});


  audio.addEventListener('timeupdate', () => {
    if (audio.duration) {
      const percent = (audio.currentTime / audio.duration) * 100;
      progressBar.style.width = percent + '%';
    }
  });

  renderPlaylist();
  loadAudio(0);


//ë©ˆì¶¤ì˜¤ë¥˜ë°©ì§€

let retryCount = 0;

audio.addEventListener('error', () => {
  if (retryCount < 3) {
    console.log(`ì¬ì‹œë„ ì¤‘... (${retryCount + 1}íšŒ)`);
    loadAudio(currentTrack);  // í˜„ì¬ íŠ¸ë™ ë‹¤ì‹œ ë¡œë“œ
    audio.play();             // ì¬ìƒ ì‹œë„
    retryCount++;
  } else {
    console.log("ì¬ì‹œë„ ì‹¤íŒ¨, ë‹¤ìŒ íŠ¸ë™ìœ¼ë¡œ ì´ë™");
    retryCount = 0;
    currentTrack++;           // ë‹¤ìŒ íŠ¸ë™ìœ¼ë¡œ ì´ë™

    // ë£¨í”„ ì¬ìƒ: ëë‚˜ë©´ ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°
    if (currentTrack >= selectedTracks.length) {
      currentTrack = 0;
    }

    loadAudio(currentTrack);  // ë‹¤ìŒ (ë˜ëŠ” ì²« ë²ˆì§¸) íŠ¸ë™ ë¡œë“œ
    audio.play();             // ì¬ìƒ
  }
});

function checkPlaylistByIds(ids) {
  const checkboxes = document.querySelectorAll('#playlist-checkboxes input[type="checkbox"]');
  checkboxes.forEach((checkbox, index) => {
    checkbox.checked = ids.includes(index);
  });
}

function favoritePlayer() {
  const favIds = getFavoriteIds();
  if (favIds.length === 0) {
    alert("ì¦ê²¨ì°¾ê¸°ëœ ë§ì”€ì´ ì—†ìŠµë‹ˆë‹¤.");
    return;
  }
 hideSettingsMenu()
  // ìŒì•… ëª©ë¡ ì²´í¬ë°•ìŠ¤ ì—´ê¸°
  togglePlaylist();

  // ì²´í¬ë°•ìŠ¤ ì²´í¬
  setTimeout(() => {
    checkPlaylistByIds(favIds);

    // ì„ íƒ ì ìš© (ìë™ìœ¼ë¡œ applySelectedë¥¼ ì‹¤í–‰í•  ìˆ˜ë„ ìˆìŒ)
    applySelected();
hidePlaylist()
    // ìŒì•… ì¬ìƒ
   syncVerseWithAudio(); // ì¬ìƒ ì‹œ ì œëª© ê¸°ë°˜ìœ¼ë¡œ ë§ì”€ ì‹±í¬
  audio.play(); // ì¬ìƒ ì‹œì‘

  }, 300); // UI ë°˜ì˜ ì‹œê°„ ì•½ê°„ ëŒ€ê¸°
}

function showPlayer() {
  document.getElementById('player-bar').style.display = 'block';

  // ëª¨ë“  ì²´í¬ë°•ìŠ¤ë¥¼ ì²´í¬ ìƒíƒœë¡œ ì„¤ì •
  const checkboxes = playlistCheckboxes.querySelectorAll('input[type="checkbox"]');
  checkboxes.forEach(cb => cb.checked = true);

  // ì „ì²´ íŠ¸ë™ì„ ì„ íƒ
  selectedTracks = [...audioData];
  currentTrack = 0;
  playAllLoop = true;

  loadAudio(currentTrack); // ì²« ë²ˆì§¸ íŠ¸ë™ ë¡œë“œ
   syncVerseWithAudio(); // ì¬ìƒ ì‹œ ì œëª© ê¸°ë°˜ìœ¼ë¡œ ë§ì”€ ì‹±í¬
  audio.play(); // ì¬ìƒ ì‹œì‘
  const toggleBtn = document.getElementById("togglePlayBtn");
  toggleBtn.textContent = "ë©ˆì¶¤";

  hasStarted = true; // âœ… ì´ ì¤„ì„ ì¶”ê°€í•´ì„œ ì¤‘ë³µ ì´ˆê¸°í™” ë°©ì§€
  isPlaying = true;  // âœ… í˜„ì¬ ì¬ìƒ ì¤‘ ìƒíƒœë¡œ ì„¤ì •
  hideSettingsMenu(); // ì„¤ì •ì°½ ë‹«ê¸°
}

// í™”ë©´ì´ êº¼ì¡Œì„ ë•Œ ì²˜ë¦¬
document.addEventListener('visibilitychange', () => {
  if (document.hidden) { // í™”ë©´ì´ êº¼ì¡Œì„ ë•Œ
    // audio.play()ì„ ê°•ì œë¡œ í˜¸ì¶œí•˜ì—¬ ì¬ìƒ ìƒíƒœë¥¼ ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤.
    // ì‚¬ìš©ì ì œìŠ¤ì²˜ê°€ í•„ìš”í•œ ê²½ìš°, ì´ë²¤íŠ¸ì— ë”°ë¼ audio.play()ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
    audio.play();
  } else { // í™”ë©´ì´ ì¼œì¡Œì„ ë•Œ
    // í•„ìš”í•œ ê²½ìš°, ì¬ìƒì„ ì¼ì‹œ ì •ì§€í•˜ê±°ë‚˜ ë³¼ë¥¨ì„ ì¡°ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  }
});

</script>

<script>
function openHelpPopup() {
  hideSettingsMenu()
  if (document.getElementById("helpPopup")) return;

  const popupOverlay = document.createElement("div");
  popupOverlay.id = "helpPopup";
  popupOverlay.className = "help-popup-overlay";

  const popupContent = document.createElement("div");
  popupContent.className = "help-popup-container";

  popupContent.innerHTML = `
    <div class="help-title">ë§Œë“ ì´ : ë‚­ë§Œê³ ì–‘ì´</div>
    <div class="help-title">ë²„ì „ : ì„±ê²½ì•”ì†¡ 60êµ¬ì ˆ v1.0</div>
    <div class="help-title">ìµœì¢…ìˆ˜ì •ì¼ : 2025.06.01</div>
  
    <textarea class="help-textarea" readonly>
ğŸ“ì„±ê²½ì•”ì†¡ 60êµ¬ì ˆ ì„¤ëª…ì„œ

1.ìˆ¨ê²¨/ë³´ì—¬ : ë§ì”€ ë‚´ìš©ì„ ìˆ¨ê¸°ê±°ë‚˜ ë³´ì´ë„ë¡ í•©ë‹ˆë‹¤.

2.ëœë¤/ìˆœì°¨ : ë§ì”€ ë³´ì´ëŠ” ìˆœì„œë¥¼ ì„ì–´ì„œ ëœë¤ìœ¼ë¡œ ë‚˜ì˜¤ê²Œ í•˜ê±°ë‚˜, ìˆœì°¨ì ìœ¼ë¡œ ë‚˜ì˜¤ê²Œ í•©ë‹ˆë‹¤.

3.ì¦ì°¾/ëª¨ë‘ : ëª¨ë“  ë§ì”€ì´ ë‚˜ì˜¤ê²Œ í•˜ê±°ë‚˜, ì¦ê²¨ì°¾ê¸°ì— ì¶”ê°€ëœ ë§ì”€ë§Œ ë‚˜ì˜¤ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

4.ì„¤ì •/ë§ì”€ í¸ì§‘í•˜ê¸° : ë§ì”€ì„ í¸ì§‘í•˜ê±°ë‚˜ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì „ë¬¸ê°€ ëª¨ë“œì´ë¯€ë¡œ ìì‹  ìˆëŠ” ë¶„ë“¤ë§Œ ì‹œë„í•´ ì£¼ì„¸ìš”. ì›¬ë§Œí•˜ë©´ ê¸°ì¡´ ë§ì”€ì„ ì‚­ì œí•˜ì§€ ë§ˆì‹œê³ , ìƒˆë¡œìš´ ë§ì”€ì„ ì¶”ê°€í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•´ ì£¼ì„¸ìš”. ë§ì”€ì„ ì‚­ì œí•˜ë©´ â€˜ë§ì”€ ë“£ê¸°â€™ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì¶”ê°€ëœ ë§ì”€ì€ ì˜¤ë””ì˜¤ê°€ ì œê³µë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì°¸ê³ í•´ ì£¼ì„¸ìš”.

5.ì„¤ì •/ì „ì²´ ë§ì”€ ë“£ê¸° : 60ê°œì˜ ë§ì”€ì„ ìˆœì°¨ì ìœ¼ë¡œ ë°˜ë³µ ì¬ìƒí•©ë‹ˆë‹¤. ìŒì•… í”Œë ˆì´ì–´ê°€ ëœ¨ë©´ ëª©ë¡ì„ í´ë¦­í•´ì„œ ì›í•˜ëŠ” ë§ì”€ì„ ì„ íƒí•œ í›„ â€˜ì ìš©â€™ì„ ëˆ„ë¥´ë©´, ì²´í¬ëœ ë§ì”€ë§Œ ì¬ìƒë©ë‹ˆë‹¤.

6.ì„¤ì •/ì¦ê²¨ì°¾ê¸° ë§ì”€ ë“£ê¸° : ì¦ê²¨ì°¾ê¸°ì— ì¶”ê°€ëœ ë§ì”€ë§Œ ìˆœì°¨ì ìœ¼ë¡œ ë°˜ë³µ ì¬ìƒí•©ë‹ˆë‹¤.

7.ìœ ìš©í•œ ê¸°ëŠ¥ : ì†ê°€ë½ìœ¼ë¡œ ì¢Œìš°ë¡œ ì²œì²œíˆ ë„˜ê¸°ë©´ ë§ì”€ì´ í•œ ë‹¨ê³„ì”© ë³€í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ë¹ ë¥´ê²Œ ë‘ ë²ˆ ì—°ì† ë„˜ê¸°ë©´ 10ê°œì”© ë‹¨ë²ˆì— ë„˜ì–´ê°‘ë‹ˆë‹¤.
    </textarea>
    <div class="help-button-box">
      <button class="help-close-btn" onclick="closeHelpPopup()">ë‹«ê¸°</button>
    </div>
  `;

  popupOverlay.appendChild(popupContent);
  document.body.appendChild(popupOverlay);

  if (!document.getElementById("helpPopupStyle")) {
    const style = document.createElement("style");
    style.id = "helpPopupStyle";
    style.textContent = `
/* íŒì—… ì „ì²´ í™”ë©´ ë®ê¸° */
.help-popup-overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background-color: rgba(10, 10, 10, 0.95);
  display: flex;
  justify-content: center;
  align-items: center; /* stretch â†’ centerë¡œ ë³€ê²½í•´ì„œ ì¤‘ì•™ ì •ë ¬ */
  padding: 5px; /* ê°€ì¥ìë¦¬ ì—¬ë°± ì¶”ê°€ */
  z-index: 9999;
  box-sizing: border-box;
  overflow: auto; /* í˜¹ì‹œ ë„˜ì¹  ë•Œ ìŠ¤í¬ë¡¤ */
}

/* íŒì—… ë³¸ì²´ */
.help-popup-container {
  background-color: #1c1c1c;
  border-radius: 8px; /* ì‚´ì§ ë‘¥ê¸€ê²Œ */
  padding: 5px 0 10px 0;
  width: 100%;
  height: 100%; 

  box-sizing: border-box;
  color: #e0e0e0;
  font-family: 'Segoe UI', sans-serif;
  font-size: 14px;
  line-height: 1.4;
  display: flex;
  flex-direction: column;
}

/* ì œëª© ì¤„ */
.help-title {
  margin: 2px 0 2px 0;
  font-size: 14px;
  color: #ffffff;
  padding-left: 4px;
   line-height: 1.2;

}

.help-textarea {
  flex: 1;
  width: 100%;
  resize: none;
  overflow-y: auto;
  background-color: #2a2a2a;
  color: #ffffff;
  border: 1px solid #555;
  border-radius: 4px;
  padding: 12px;
  font-size: 14px;
  box-sizing: border-box;
  line-height: 1.4;
  margin-top: 10px;
  min-height: 200px; /* ê¸°ë³¸ê°’, í™”ë©´ì— ë”°ë¼ ì»¤ì§ */
  max-height: none;  /* ìµœëŒ€ ë†’ì´ ì œí•œ í•´ì œ */
}

/* ë‹«ê¸° ë²„íŠ¼ ì˜ì—­ */
.help-button-box {
  text-align: right;
  margin: 15px 10px 0 0;
}

/* ë‹«ê¸° ë²„íŠ¼ */
.help-close-btn {
  background-color: #3a3a3a;
  color: #ffffff;
  border: none;
  padding: 8px 20px;
  border-radius: 6px;
  font-size: 14px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.help-close-btn:hover {
  background-color: #555;
}
`;
    document.head.appendChild(style);
  }
}

function closeHelpPopup() {
  const popup = document.getElementById("helpPopup");
  if (popup) popup.remove();

location.reload(true);
}
</script>

<script>
function adjustPlaylistMaxHeight() {
  const offset = 170; // ìƒë‹¨ header ë“± ì°¨ì§€í•˜ëŠ” ë†’ì´
  const viewportHeight = window.innerHeight; // ì‹¤ì œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë†’ì´
  const maxHeight = viewportHeight - offset;

  const el = document.getElementById('playlist-checkboxes');
  if (el) {
    el.style.maxHeight = `${maxHeight}px`;
  }
}

window.addEventListener('load', adjustPlaylistMaxHeight);
window.addEventListener('resize', adjustPlaylistMaxHeight);

</script>

</body>
</html>
