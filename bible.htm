<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>ì„±ê²½ ì•”ì†¡ ì¹´ë“œ</title>
<style>

* {
  box-sizing: border-box;
}

html, body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
}
body {
  background-color: #121212;
  color: #fff;
  display: flex;
  flex-direction: column;
  margin: 0;
  padding: 0;
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* ìƒë‹¨ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
.top-buttons {
  display: flex;
  justify-content: space-between; /* ë²„íŠ¼ì„ ì¢Œìš°ë¡œ ìµœëŒ€í•œ ë²Œë¦¼ */
   align-items: center; /* <-- stretchì—ì„œ centerë¡œ ë³€ê²½ */
  background-color: #1e1e1e;
  padding: 0;
  z-index: 2;
}




.top-buttons button {
  flex: 1; /* ë²„íŠ¼ ë„ˆë¹„ë¥¼ ê· ë“±í•˜ê²Œ ë§Œë“¦ */
  text-align: center; /* ë²„íŠ¼ ì•ˆì˜ í…ìŠ¤íŠ¸ ì¤‘ì•™ ì •ë ¬ */
  padding: 0 20px;
  height: 40px;
  line-height: 40px;
  vertical-align: middle;
  background: none;
  border: none;
  color: #fff;
  font-size: 1.1rem;
  cursor: pointer;
  border-right: 1px solid #333333;
  border-radius: 0;
  transition: background-color 1s ease, color 0.3s ease; /* âœ… transition ìˆ˜ì • */
}

/* í´ë¦­(ë˜ëŠ” í„°ì¹˜) ì‹œ íš¨ê³¼ */
.top-buttons button:active {
  background-color: rgba(197, 79, 109, 0.8); /* âœ… ì•½ê°„ì˜ íˆ¬ëª…ë„ (0.7) ì¶”ê°€ */
  transition: background-color 1s ease; /* âœ… transition ì¶”ê°€ */
}


/* í˜¸ë²„ íš¨ê³¼ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ */
.top-buttons button:hover,
.top-buttons button:focus {
  background-color: rgba(197, 79, 109, 0.8);âœ… ì•½ê°„ì˜ íˆ¬ëª…ë„ (0.7) ì¶”ê°€ */
}



/* í•˜ë‹¨ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
.bottom-buttons {
  display: flex;
  justify-content: space-around;
  background-color: #1e1e1e;
  padding: 10px 0;
  z-index: 2;
}

.bottom-buttons button {
  background: none;
  border: none;
  color: #fff;
  font-size: 1.1rem;
  cursor: pointer;
  transition: background-color 0.3s ease, color 0.3s ease;
  border-radius: 8px;
}

.bottom-buttons button:hover,
.bottom-buttons button:focus {
  background-color: #2a2a2a;
}

.bottom-buttons button:active {
  background-color: #333333;
}

.verse-container {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  padding: 14px 0 40px 0;
  gap: 14px;
  overflow-y: auto;
  overflow-x: hidden;
  touch-action: pan-y;
  margin: 50 0 0 0;  /* ğŸ”§ ìƒë‹¨ ë§ˆì§„ 50px */
  box-sizing: border-box;
}




.verse-box, 
.favorite-box {
 /*height: auto; */
  width: 100%;
  margin: 0 ;
  padding: 10px ;
  box-sizing: border-box;


}


.verse-box {
  background: #1e1e1e;
  /*border-radius: 15px;*/
  text-align: left;
  cursor: pointer;
}


.favorite-box {
  display: flex;
  align-items: center;
  gap: 10px; /* ê°„ê²© ì¡°ì ˆ */
  background: #1e1e1e;
   /*border-radius: 15px;*/
  cursor: pointer;
}




.verse-title {
  font-size: 1.6rem;
  /*font-weight: bold;*/
  color: #FFF; /* ì£¼í™©ë¹› ë…¸ë‘ */
  margin: 0;
}

.verse-text {
  font-size: 1.6rem;
  line-height: 2.4rem;
   /*font-weight: bold;*/
  color: #FFF; /* ì—°ë…¹ìƒ‰ */
  margin: 0;
}



.favorite-label {
  font-size: 1.6rem;
  color: #fff; /* ì—°í•˜ëŠ˜ìƒ‰ */
   /*font-weight: bold;*/
}




/* ì²´í¬ë°•ìŠ¤ í¬ê¸° ì¡°ì • */
#favoriteCheckbox {
  width: 17px;
  height: 17px;
  transform: scale(1.5);
}




/* ë§ì”€ í¸ì§‘ ëª¨ë“œ ìŠ¤íƒ€ì¼ */
.edit-container {
  position: fixed;
  top: 0; /* ìˆ˜ì •: ê¸°ì¡´ 60px -> 0 */
  bottom: 0;
  left: 0;
  right: 0;
  background-color: #121212;
  padding: 10px 15px 20px 15px;
  display: flex;
  flex-direction: column;
  z-index: 5;
  overflow: auto;
}

.edit-title {
  font-size: 1.4rem;
  color: #fff;
 font-weight: normal; /* êµµê²Œ ë³´ì´ì§€ ì•Šë„ë¡ ì„¤ì • */
  margin: 0;
  padding-top: 4px;
  padding-left: 10px;
  padding-bottom: 6px;
}

#editTextarea {
  flex: 1;
  width: 100%;
  resize: none;
  font-size: 1rem;
  padding: 10px;
  background-color: #1e1e1e;
  color: #fff;
  border: 1px solid #444;
  border-radius: 10px;
  box-sizing: border-box;
}

.edit-buttons {
  display: flex;
  justify-content: space-around;
  margin-top: 15px;
}

.edit-buttons button {
  flex: 1;
  margin: 0 5px;
  padding: 10px;
  font-size: 1.1rem;
  border: none;
  border-radius: 8px;
  background-color: #2a2a2a;
  color: #fff;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.edit-buttons button:hover {
  background-color: #333333;
}

@media (max-width: 768px) {
  #editTextarea {
    font-size: 1rem;
  }

  .edit-title {
    font-size: 1.2rem;
  }
}

.verse-box.animate-left,
.favorite-box.animate-left {
  animation: slideLeft 0.7s ease;
}

.verse-box.animate-right,
.favorite-box.animate-right {
  animation: slideRight 0.7s ease;
}

@keyframes slideLeft {
  0% {
    opacity: 0;
    transform: translateX(50px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideRight {
  0% {
    opacity: 0;
    transform: translateX(-50px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}


#settingsMenu {
  display: none;
  position: absolute;
  top: 48px;
  right: 10px;
  width: 90vw;
  max-width: 300px;
  background-color: #1e1e1e;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 14px;
  padding: 5px 12px;
box-shadow:
  /* ë„¤ì˜¨ ê´‘ì±„ - ë” ë°ê³  ì„ ëª…í•˜ê²Œ */
  0 0 4px rgba(0, 255, 255, 0.8),   /* í˜•ê´‘ ì²­ë¡ë¹› */
  0 0 8px rgba(0, 255, 255, 0.6),
  0 0 16px rgba(0, 255, 255, 0.5),
  0 0 24px rgba(0, 255, 255, 0.3),

  /* ì•„ë˜ë¡œ ë“œë¦¬ìš´ ì–´ë‘ìš´ ê·¸ë¦¼ì */
  0 10px 20px rgba(0, 0, 0, 0.5);
  
z-index: 10000;
  animation: fadeInMenu 0.3s ease-out;
}

@keyframes fadeInMenu {
  from {
    opacity: 0;
    transform: translateY(-10px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

#settingsMenu h3 {
  font-size: 1.2rem;
  color: #ffffff;
  margin-top: 0;
  margin-bottom: 10px;
  padding-bottom: 6px;
  border-bottom: 1px solid #333;
}

#settingsMenu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

#settingsMenu ul li {
  padding: 10px 14px;
  margin-bottom: 6px;
  background-color: #262626;
  border-radius: 10px;
  color: #eee;
  font-size: 1rem;
  cursor: pointer;
  transition: background-color 0.25s ease;
}

#settingsMenu ul li:hover {
  background-color: #333;
  color: #03dac6;
}

#settingsMenu ul li:active {
  background-color: #444;
}



/* ë©”ë‰´ í•­ëª© */
.settings-item {
  padding: 10px 10px;
  font-size: 1.1rem;
  color: #fff;
  background-color: transparent;
  user-select: none;
  cursor: pointer;
  transition: background-color 0.3s ease;
  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
}

/* ë§ˆì§€ë§‰ í•­ëª©ì€ ë³´ë” ì œê±° */
.settings-item:last-child {
  border-bottom: none;
}

/* í˜¸ë²„ íš¨ê³¼ */
.settings-item:hover {
  background-color: #c54f6d;
}

/* ìŠ¬ë¼ì´ë” */
.settings-item input[type="range"] {
  width: 100%;
  margin-top: 6px;
  cursor: pointer;
}

</style>
</head>
<body>

<div class="top-buttons">
  <button id="toggleButton" onclick="toggleVerse()">ìˆ¨ê²¨</button>
  <button id="modeToggleButton" onclick="toggleMode()">ëœë¤</button>
  <button id="favoriteToggleButton" onclick="toggleFavorites()">ì¦ì°¾</button>
<button id="settingsToggleButton" onclick="toggleSettingsMenu()">ì„¤ì •</button>
</div>


<div id="settingsMenu">
  <div class="inner-container">
    <div class="settings-item" onclick="handleEditClick()">ğŸ’— ë§ì”€ í¸ì§‘í•˜ê¸°</div>

    <div class="settings-item">
      ğŸ’— ë§ì”€êµ¬ì ˆ ê¸€ìí¬ê¸°
      <input id="titleFontSlider" type="range" min="1" max="6" value="1">
    </div>
    <div class="settings-item">
      ğŸ’— ë§ì”€ë‚´ìš© ê¸€ìí¬ê¸°
      <input id="textFontSlider" type="range" min="1" max="6" value="1">
    </div>
    <div class="settings-item" onclick="resetFontSizes()">ğŸ’— ê¸€ìí¬ê¸° ì´ˆê¸°í™”</div>
 <div class="settings-item" id="toggleEnglishVerseBtn" onclick="toggleEnglishVerse()">ğŸ’— ì˜ì–´ ë§ì”€ ìˆ¨ê¸°ê¸°</div>
 <div class="settings-item"  id="game1" onclick="game()">ğŸ’— ìˆœì„œ ë§ì¶”ê¸° ê²Œì„</div>   
<div class="settings-item" onclick="openHelpPopup()">ğŸ’— ë„ì›€ë§</div>
    <div class="settings-item" onclick="hideSettingsMenu()">ğŸ’— ë‚˜ê°€ê¸°</div>
  </div>
</div>



<div class="verse-container" id="verseContainer">
  <div class="verse-box">
    <div class="verse-title" id="verseTitle"></div>
  </div>
  <div class="verse-box">
    <div class="verse-text" id="verseText"></div>
  </div>
     <div class="verse-box">
    <div class="verse-text" id="verseTextEn"></div>
  </div>
  <div class="favorite-box" onclick="toggleFavoriteCheckbox()">
    <span class="favorite-label">ì¦ê²¨ì°¾ê¸° ì¶”ê°€  </span>
    <input type="checkbox" id="favoriteCheckbox" onclick="event.stopPropagation(); updateFavorite();">
  </div>
</div>









<div id="editContainer" class="edit-container" style="display: none;">
  <h2 class="edit-title">í¸ì§‘ í˜•ì‹ : ë§ì”€êµ¬ì ˆ | í•œê¸€ | ì˜ë¬¸</h2>
  <textarea id="editTextarea"></textarea>
  <div class="edit-buttons">
    <button onclick="saveEditedVerses()">í™•ì¸</button>
    <button onclick="cancelEdit()">ì·¨ì†Œ</button>
    <button onclick="resetToOriginal()">ì´ˆê¸°í™”</button>
  </div>
</div>


<script>



let settingsVisible = false;

function toggleSettingsMenu() {
  const menu = document.getElementById("settingsMenu");
  settingsVisible = !settingsVisible;
  menu.style.display = settingsVisible ? "block" : "none";
}

document.addEventListener("click", function (event) {
  const menu = document.getElementById("settingsMenu");
  const button = document.getElementById("settingsToggleButton");
  if (!menu.contains(event.target) && event.target !== button) {
    menu.style.display = "none";
    settingsVisible = false;
  }
});

function handleEditClick() {
  toggleEditMode();
  hideSettingsMenu();
}

function hideSettingsMenu() {
  document.getElementById("settingsMenu").style.display = "none";
  settingsVisible = false;
}

// ê¸€ì í¬ê¸° ì¡°ì ˆ ìŠ¬ë¼ì´ë”ì™€ ì €ì¥ ë¡œì§
const titleFontSlider = document.getElementById("titleFontSlider");
const textFontSlider = document.getElementById("textFontSlider");
const verseTitle = document.getElementById("verseTitle");
const verseText = document.getElementById("verseText");

function applyFontSize() {
  const titleScale = parseInt(titleFontSlider.value);
  const textScale = parseInt(textFontSlider.value);

  const titleSize = 1.6 + (titleScale - 1) * 0.2;
  const textSize = 1.6 + (textScale - 1) * 0.2;

  verseTitle.style.fontSize = `${titleSize}rem`;
  verseTitle.style.lineHeight = `${titleSize * 1.4}rem`; // ì¤„ê°„ê²© ì„¤ì •
  verseText.style.fontSize = `${textSize}rem`;
  verseText.style.lineHeight = `${textSize * 1.5}rem`; // ì¤„ê°„ê²© ì„¤ì •
  verseTextEn.style.fontSize = `${textSize}rem`;
  verseTextEn.style.lineHeight = `${textSize * 1.5}rem`; // ì¤„ê°„ê²© ì„¤ì •
  localStorage.setItem("verseTitleSize", titleScale);
  localStorage.setItem("verseTextSize", textScale);
}

titleFontSlider.addEventListener("input", applyFontSize);
textFontSlider.addEventListener("input", applyFontSize);

function resetFontSizes() {
  titleFontSlider.value = 1;
  textFontSlider.value = 1;
  applyFontSize();
}

window.addEventListener("load", () => {
  const savedTitleSize = localStorage.getItem("verseTitleSize") || 1;
  const savedTextSize = localStorage.getItem("verseTextSize") || 1;

  titleFontSlider.value = savedTitleSize;
  textFontSlider.value = savedTextSize;

  applyFontSize();
});

document.getElementById("titleFontSlider").addEventListener("input", function () {
  const scale = parseInt(this.value);
  const verseTitle = document.getElementById("verseTitle");
  const fontSize = 1.4 + 0.2 * scale;
  const lineHeight = fontSize * 1.4; // ì¤„ê°„ê²© ë¹„ìœ¨
  verseTitle.style.fontSize = fontSize + "rem";
  verseTitle.style.lineHeight = lineHeight + "rem";
});

document.getElementById("textFontSlider").addEventListener("input", function () {
  const scale = parseInt(this.value);
  const verseText = document.getElementById("verseText");
  const verseTextEn = document.getElementById("verseTextEn");
  const fontSize = 1.4 + 0.2 * scale;
  const lineHeight = fontSize * 1.5; // ì¤„ê°„ê²© ë¹„ìœ¨
  verseText.style.fontSize = fontSize + "rem";
  verseText.style.lineHeight = lineHeight + "rem";
  verseTextEn.style.fontSize = fontSize + "rem";
  verseTextEn.style.lineHeight = lineHeight + "rem";
});


// localStorage key
const STORAGE_KEY_VERSES = 'savedVerses2';
const STORAGE_KEY_FAVORITES = 'favorites2';

// ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì—ì„œ ì €ì¥ëœ ë§ì”€ ë¶ˆëŸ¬ì˜¤ê¸°
function loadSavedVerses() {
  const saved = localStorage.getItem(STORAGE_KEY_VERSES);
  if (!saved) return null;

  try {
    const parsed = JSON.parse(saved);
    return parsed.map((v, i) => ({
      ...v,
      id: i,
      title: v.title || '',
      text: v.text || '',
      textEn: v.textEn || '',
      favorite: v.favorite || false
    }));
  } catch {
    return null;
  }
}

function saveVersesToStorage(verses) {
  localStorage.setItem(STORAGE_KEY_VERSES, JSON.stringify(verses));
}


// ê¸°ë³¸ ë§ì”€ êµ¬ì ˆ ë¬¸ìì—´
const originalVersesStr = `
1. ìš”í•œë³µìŒ 3ì¥ 16ì ˆ| í•˜ë‚˜ë‹˜ì´ ì„¸ìƒì„ ì´ì²˜ëŸ¼ ì‚¬ë‘í•˜ì‚¬ ë…ìƒìë¥¼ ì£¼ì…¨ìœ¼ë‹ˆ ì´ëŠ” ì €ë¥¼ ë¯¿ëŠ” ìë§ˆë‹¤ ë©¸ë§ì¹˜ ì•Šê³  ì˜ìƒì„ ì–»ê²Œ í•˜ë ¤ í•˜ì‹¬ì´ë‹ˆë¼ [ê°œì—­í•œê¸€] | For God so loved the world, that he gave his only begotten Son, that whosoever believeth in him should not perish, but have everlasting life. [KJV]
2. ìš”í•œë³µìŒ 14ì¥ 6ì ˆ| ì˜ˆìˆ˜ê»˜ì„œ ê°€ë¼ì‚¬ëŒ€ ë‚´ê°€ ê³§ ê¸¸ì´ìš” ì§„ë¦¬ìš” ìƒëª…ì´ë‹ˆ ë‚˜ë¡œ ë§ë¯¸ì•”ì§€ ì•Šê³ ëŠ” ì•„ë²„ì§€ê»˜ë¡œ ì˜¬ ìê°€ ì—†ëŠë‹ˆë¼ [ê°œì—­í•œê¸€] | Jesus saith unto him, I am the way, the truth, and the life: no man cometh unto the Father, but by me. [KJV]
3. ë¡œë§ˆì„œ 5ì¥ 8ì ˆ| ìš°ë¦¬ê°€ ì•„ì§ ì£„ì¸ ë˜ì—ˆì„ ë•Œì— ê·¸ë¦¬ìŠ¤ë„ê»˜ì„œ ìš°ë¦¬ë¥¼ ìœ„í•˜ì—¬ ì£½ìœ¼ì‹¬ìœ¼ë¡œ í•˜ë‚˜ë‹˜ê»˜ì„œ ìš°ë¦¬ì—ê²Œ ëŒ€í•œ ìê¸°ì˜ ì‚¬ë‘ì„ í™•ì¦í•˜ì…¨ëŠë‹ˆë¼ [ê°œì—­í•œê¸€] | But God commendeth his love toward us, in that, while we were yet sinners, Christ died for us. [KJV]
4. íˆë¸Œë¦¬ì„œ 11ì¥ 6ì ˆ| ë¯¿ìŒì´ ì—†ì´ëŠ” ê¸°ì˜ì‹œê²Œ ëª»í•˜ë‚˜ë‹ˆ í•˜ë‚˜ë‹˜ê»˜ ë‚˜ì•„ê°€ëŠ” ìëŠ” ë°˜ë“œì‹œ ê·¸ê°€ ê³„ì‹  ê²ƒê³¼ ë˜í•œ ê·¸ê°€ ìê¸°ë¥¼ ì°¾ëŠ” ìë“¤ì—ê²Œ ìƒ ì£¼ì‹œëŠ” ì´ì‹¬ì„ ë¯¿ì–´ì•¼ í• ì°Œë‹ˆë¼ [ê°œì—­í•œê¸€]| But without faith it is impossible to please him: for he that cometh to God must believe that he is, and that he is a rewarder of them that diligently seek him. [KJV]
5. ë§ˆíƒœë³µìŒ 6ì¥ 33ì ˆ| ë„ˆí¬ëŠ” ë¨¼ì € ê·¸ì˜ ë‚˜ë¼ì™€ ê·¸ì˜ ì˜ë¥¼ êµ¬í•˜ë¼ ê·¸ë¦¬í•˜ë©´ ì´ ëª¨ë“  ê²ƒì„ ë„ˆí¬ì—ê²Œ ë”í•˜ì‹œë¦¬ë¼  [ê°œì—­í•œê¸€]| But seek ye first the kingdom of God, and his righteousness; and all these things shall be added unto you.  [KJV]
6. ë°ì‚´ë¡œë‹ˆê°€ì „ì„œ 5ì¥ 16~18ì ˆ| í•­ìƒ ê¸°ë»í•˜ë¼ ì‰¬ì§€ ë§ê³  ê¸°ë„í•˜ë¼ ë²”ì‚¬ì— ê°ì‚¬í•˜ë¼ ì´ëŠ” ê·¸ë¦¬ìŠ¤ë„ ì˜ˆìˆ˜ ì•ˆì—ì„œ ë„ˆí¬ë¥¼ í–¥í•˜ì‹  í•˜ë‚˜ë‹˜ì˜ ëœ»ì´ë‹ˆë¼  [ê°œì—­í•œê¸€]| Rejoice evermore.Pray without ceasing. In every thing give thanks: for this is the will of God in Christ Jesus concerning you.  [KJV]
7. ì‚¬ë„í–‰ì „ 1ì¥ 8ì ˆ| ì˜¤ì§ ì„±ë ¹ì´ ë„ˆí¬ì—ê²Œ ì„í•˜ì‹œë©´ ë„ˆí¬ê°€ ê¶ŒëŠ¥ì„ ë°›ê³  ì˜ˆë£¨ì‚´ë ˜ê³¼ ì˜¨ ìœ ëŒ€ì™€ ì‚¬ë§ˆë¦¬ì•„ì™€ ë•… ëê¹Œì§€ ì´ë¥´ëŸ¬ ë‚´ ì¦ì¸ì´ ë˜ë¦¬ë¼ í•˜ì‹œë‹ˆë¼  [ê°œì—­í•œê¸€]| But ye shall receive power, after that the Holy Ghost is come upon you: and ye shall be witnesses unto me both in Jerusalem, and in all Judaea, and in Samaria, and unto the uttermost part of the earth.  [KJV]
8. ìš”í•œë³µìŒ 15ì¥ 5ì ˆ| ë‚˜ëŠ” í¬ë„ë‚˜ë¬´ìš” ë„ˆí¬ëŠ” ê°€ì§€ë‹ˆ ì €ê°€ ë‚´ ì•ˆì—, ë‚´ê°€ ì € ì•ˆì— ìˆìœ¼ë©´ ì´ ì‚¬ëŒì€ ê³¼ì‹¤ì„ ë§ì´ ë§ºë‚˜ë‹ˆ ë‚˜ë¥¼ ë– ë‚˜ì„œëŠ” ë„ˆí¬ê°€ ì•„ë¬´ê²ƒë„ í•  ìˆ˜ ì—†ìŒì´ë¼  [ê°œì—­í•œê¸€]| I am the vine, ye are the branches: He that abideth in me, and I in him, the same bringeth forth much fruit: for without me ye can do nothing.  [KJV]
9. ê°ˆë¼ë””ì•„ì„œ 2ì¥ 20ì ˆ| ë‚´ê°€ ê·¸ë¦¬ìŠ¤ë„ì™€ í•¨ê»˜ ì‹­ìê°€ì— ëª» ë°•í˜”ë‚˜ë‹ˆ ê·¸ëŸ°ì¦‰ ì´ì œëŠ” ë‚´ê°€ ì‚° ê²ƒì´ ì•„ë‹ˆìš” ì˜¤ì§ ë‚´ ì•ˆì— ê·¸ë¦¬ìŠ¤ë„ê»˜ì„œ ì‚¬ì‹  ê²ƒì´ë¼ ì´ì œ ë‚´ê°€ ìœ¡ì²´ ê°€ìš´ë° ì‚¬ëŠ” ê²ƒì€ ë‚˜ë¥¼ ì‚¬ë‘í•˜ì‚¬ ë‚˜ë¥¼ ìœ„í•˜ì—¬ ìê¸° ëª¸ì„ ë²„ë¦¬ì‹  í•˜ë‚˜ë‹˜ì˜ ì•„ë“¤ì„ ë¯¿ëŠ” ë¯¿ìŒ ì•ˆì—ì„œ ì‚¬ëŠ” ê²ƒì´ë¼  [ê°œì—­í•œê¸€]| I am crucified with Christ: neverthless I live; yet not I, but Christ liveth in me: and the life which I now live in the flesh I live by the faith of the Son of God, who loved me, and gave himself for me.  [KJV]
10. ì´ì‚¬ì•¼ 41ì¥ 10ì ˆ| ë‘ë ¤ì›Œ ë§ë¼ ë‚´ê°€ ë„ˆì™€ í•¨ê»˜ í•¨ì´ë‹ˆë¼ ë†€ë¼ì§€ ë§ë¼ ë‚˜ëŠ” ë„¤ í•˜ë‚˜ë‹˜ì´ ë¨ì´ë‹ˆë¼ ë‚´ê°€ ë„ˆë¥¼ êµ³ì„¸ê²Œ í•˜ë¦¬ë¼ ì°¸ìœ¼ë¡œ ë„ˆë¥¼ ë„ì™€ ì£¼ë¦¬ë¼ ì°¸ìœ¼ë¡œ ë‚˜ì˜ ì˜ë¡œìš´ ì˜¤ë¥¸ì†ìœ¼ë¡œ ë„ˆë¥¼ ë¶™ë“¤ë¦¬ë¼  [ê°œì—­í•œê¸€]| Fear thou not; for I am with thee: be not dismayed; for I am thy God: I will strengthen thee; yea, I will help thee; yea, I will uphold thee with the right hand of my righteousness.  [KJV]
11. ì˜ˆë ˆë¯¸ì•¼ 33ì¥ 3ì ˆ| ë„ˆëŠ” ë‚´ê²Œ ë¶€ë¥´ì§–ìœ¼ë¼ ë‚´ê°€ ë„¤ê²Œ ì‘ë‹µí•˜ê² ê³  ë„¤ê°€ ì•Œì§€ ëª»í•˜ëŠ” í¬ê³  ë¹„ë°€í•œ ì¼ì„ ë„¤ê²Œ ë³´ì´ë¦¬ë¼  [ê°œì—­í•œê¸€]| Call unto me, and I will answer thee, and shew thee great and mighty things, which thou knowest not.  [KJV]
12. ë¹Œë¦½ë³´ì„œ 4ì¥ 19ì ˆ| ë‚˜ì˜ í•˜ë‚˜ë‹˜ì´ ê·¸ë¦¬ìŠ¤ë„ ì˜ˆìˆ˜ ì•ˆì—ì„œ ì˜ê´‘ ê°€ìš´ë° ê·¸ í’ì„±í•œëŒ€ë¡œ ë„ˆí¬ ëª¨ë“  ì“¸ ê²ƒì„ ì±„ìš°ì‹œë¦¬ë¼  [ê°œì—­í•œê¸€]| But my God shall supply all your need according to his riches in glory by Christ Jesus.  [KJV]
13. ìš”í•œì¼ì„œ 2ì¥ 15~16ì ˆ | ì´ ì„¸ìƒì´ë‚˜ ì„¸ìƒì— ìˆëŠ” ê²ƒë“¤ì„ ì‚¬ë‘ì¹˜ ë§ë¼ ëˆ„êµ¬ë“ ì§€ ì„¸ìƒì„ ì‚¬ë‘í•˜ë©´ ì•„ë²„ì§€ì˜ ì‚¬ë‘ì´ ê·¸ ì†ì— ìˆì§€ ì•„ë‹ˆí•˜ë‹ˆ ì´ëŠ” ì„¸ìƒì— ìˆëŠ” ëª¨ë“  ê²ƒì´ ìœ¡ì‹ ì˜ ì •ìš•ê³¼ ì•ˆëª©ì˜ ì •ìš•ê³¼ ì´ìƒì˜ ìë‘ì´ë‹ˆ ë‹¤ ì•„ë²„ì§€ê»˜ë¡œ ì¢‡ì•„ ì˜¨ ê²ƒì´ ì•„ë‹ˆìš” ì„¸ìƒìœ¼ë¡œ ì¢‡ì•„ ì˜¨ ê²ƒì´ë¼  [ê°œì—­í•œê¸€]| Love not the world, neither the things that are in the world. If any man love the world, the love of the Father is not in him. For all that is in the world, the lust of the flesh, and the lust of the eyes, and the pride of life, is not of the Father, but is of the world.  [KJV]
14. ë¹Œë¦½ë³´ì„œ 2ì¥ 3~4ì ˆ| ì•„ë¬´ ì¼ì—ë“ ì§€ ë‹¤íˆ¼ì´ë‚˜ í—ˆì˜ìœ¼ë¡œ í•˜ì§€ ë§ê³  ì˜¤ì§ ê²¸ì†í•œ ë§ˆìŒìœ¼ë¡œ ê°ê° ìê¸°ë³´ë‹¤ ë‚¨ì„ ë‚«ê²Œ ì—¬ê¸°ê³  ê°ê° ìê¸° ì¼ì„ ëŒì•„ë³¼ ë¿ë”ëŸ¬ ë˜í•œ ê°ê° ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ ì¼ì„ ëŒì•„ë³´ì•„ ë‚˜ì˜ ê¸°ì¨ì„ ì¶©ë§Œì¼€ í•˜ë¼  [ê°œì—­í•œê¸€]| Let nothing be done through strife or vainglory; but in lowliness of mind let each esteem other better than themselves. Look not every man on his own things, but every man also on the things of others.  [KJV]
15. ìš”í•œë³µìŒ 15ì¥ 7ì ˆ| ë„ˆí¬ê°€ ë‚´ ì•ˆì— ê±°í•˜ê³  ë‚´ ë§ì´ ë„ˆí¬ ì•ˆì— ê±°í•˜ë©´ ë¬´ì—‡ì´ë“ ì§€ ì›í•˜ëŠ”ëŒ€ë¡œ êµ¬í•˜ë¼ ê·¸ë¦¬í•˜ë©´ ì´ë£¨ë¦¬ë¼  [ê°œì—­í•œê¸€]| If ye abide in me, and my words abide in you, ye shall ask what ye will, and it shall be done unto you.  [KJV]
16. ì ì–¸ 4ì¥ 8ì ˆ| ê·¸ë¥¼ ë†’ì´ë¼ ê·¸ë¦¬í•˜ë©´ ê·¸ê°€ ë„ˆë¥¼ ë†’ì´ ë“¤ë¦¬ë¼ ë§Œì¼ ê·¸ë¥¼ í’ˆìœ¼ë©´ ê·¸ê°€ ë„ˆë¥¼ ì˜í™”ë¡­ê²Œ í•˜ë¦¬ë¼  [ê°œì—­í•œê¸€]| Exalt her, and she shall promote thee: she shall bring thee to honour, when thou dost embrace her.  [KJV]
17. ì—ë² ì†Œì„œ 4ì¥ 29ì ˆ| ë¬´ë¦‡ ë”ëŸ¬ìš´ ë§ì€ ë„ˆí¬ ì…ë°–ì—ë„ ë‚´ì§€ ë§ê³  ì˜¤ì§ ë•ì„ ì„¸ìš°ëŠ”ë° ì†Œìš©ë˜ëŠ”ëŒ€ë¡œ ì„ í•œ ë§ì„ í•˜ì—¬ ë“£ëŠ” ìë“¤ì—ê²Œ ì€í˜œë¥¼ ë¼ì¹˜ê²Œ í•˜ë¼  [ê°œì—­í•œê¸€]| Let no corrupt communication proceed out of your mouth, but that which is good to the use of edifying, that it may minister grace unto the hearers.  [KJV]
18. ìš”í•œì¼ì„œ 5ì¥ 4ì ˆ| ëŒ€ì € í•˜ë‚˜ë‹˜ê»˜ë¡œì„œ ë‚œ ìë§ˆë‹¤ ì„¸ìƒì„ ì´ê¸°ëŠë‹ˆë¼ ì„¸ìƒì„ ì´ê¸´ ì´ê¹€ì€ ì´ê²ƒì´ë‹ˆ ìš°ë¦¬ì˜ ë¯¿ìŒì´ë‹ˆë¼  [ê°œì—­í•œê¸€]| For whatsoever is born of God overcometh the world: and this is the victory that overcometh the world, even our faith.  [KJV]
19. ë§ˆíƒœë³µìŒ 7ì¥ 7ì ˆ| êµ¬í•˜ë¼ ê·¸ëŸ¬ë©´ ë„ˆí¬ì—ê²Œ ì£¼ì‹¤ ê²ƒì´ìš” ì°¾ìœ¼ë¼ ê·¸ëŸ¬ë©´ ì°¾ì„ ê²ƒì´ìš” ë¬¸ì„ ë‘ë“œë¦¬ë¼ ê·¸ëŸ¬ë©´ ë„ˆí¬ì—ê²Œ ì—´ë¦´ ê²ƒì´ë‹ˆ  [ê°œì—­í•œê¸€]| Ask, and it shall be given you; seek, and ye shall find; knock, and it shall be opened unto you:  [KJV]
20. ì ì–¸ 16ì¥ 20ì ˆ| ì‚¼ê°€ ë§ì”€ì— ì£¼ì˜í•˜ëŠ” ìëŠ” ì¢‹ì€ ê²ƒì„ ì–»ë‚˜ë‹ˆ ì—¬í˜¸ì™€ë¥¼ ì˜ì§€í•˜ëŠ” ìê°€ ë³µì´ ìˆëŠë‹ˆë¼  [ê°œì—­í•œê¸€]| He that handleth a matter wisely shall find good: and whoso trusteth in the LORD, happy is he.ã…‹  [KJV]
21. ì‹œí¸ 46í¸ 1ì ˆ| í•˜ë‚˜ë‹˜ì€ ìš°ë¦¬ì˜ í”¼ë‚œì²˜ì‹œìš” í˜ì´ì‹œë‹ˆ í™˜ë‚œ ì¤‘ì— ë§Œë‚  í° ë„ì›€ì´ì‹œë¼  [ê°œì—­í•œê¸€]| God is our refuge and strength, a very present help in trouble.  [KJV]
22. ë¡œë§ˆì„œ 10ì¥ 10ì ˆ| ì‚¬ëŒì´ ë§ˆìŒìœ¼ë¡œ ë¯¿ì–´ ì˜ì— ì´ë¥´ê³  ì…ìœ¼ë¡œ ì‹œì¸í•˜ì—¬ êµ¬ì›ì— ì´ë¥´ëŠë‹ˆë¼  [ê°œì—­í•œê¸€]| For with the heart man believeth unto righteousness; and with the mouth confession is made unto salvation.  [KJV]
23. ì´ì‚¬ì•¼ 53ì¥ 5ì ˆ| ê·¸ê°€ ì°”ë¦¼ì€ ìš°ë¦¬ì˜ í—ˆë¬¼ì„ ì¸í•¨ì´ìš” ê·¸ê°€ ìƒí•¨ì€ ìš°ë¦¬ì˜ ì£„ì•…ì„ ì¸í•¨ì´ë¼ ê·¸ê°€ ì§•ê³„ë¥¼ ë°›ìŒìœ¼ë¡œ ìš°ë¦¬ê°€ í‰í™”ë¥¼ ëˆ„ë¦¬ê³  ê·¸ê°€ ì±„ì°ì— ë§ìŒìœ¼ë¡œ ìš°ë¦¬ê°€ ë‚˜ìŒì„ ì…ì—ˆë„ë‹¤  [ê°œì—­í•œê¸€]| But he was wounded for our transgressions, he was bruised for our iniquities: the chastisement of our peace was upon him; and with his stripes we are healed.  [KJV]
24. ì ì–¸ 16ì¥ 9ì ˆ| ì‚¬ëŒì´ ë§ˆìŒìœ¼ë¡œ ìê¸°ì˜ ê¸¸ì„ ê³„íší• ì§€ë¼ë„ ê·¸ ê±¸ìŒì„ ì¸ë„í•˜ëŠ” ìëŠ” ì—¬í˜¸ì™€ì‹œë‹ˆë¼  [ê°œì—­í•œê¸€]| A man's heart deviseth his way: but the LORD directeth his steps.  [KJV]
25. ë¹Œë¦½ë³´ì„œ 4ì¥ 6~7ì ˆ| ì•„ë¬´ ê²ƒë„ ì—¼ë ¤í•˜ì§€ ë§ê³  ì˜¤ì§ ëª¨ë“  ì¼ì— ê¸°ë„ì™€ ê°„êµ¬ë¡œ, ë„ˆí¬ êµ¬í•  ê²ƒì„ ê°ì‚¬í•¨ìœ¼ë¡œ í•˜ë‚˜ë‹˜ê»˜ ì•„ë¢°ë¼ ê·¸ë¦¬í•˜ë©´ ëª¨ë“  ì§€ê°ì— ë›°ì–´ë‚œ í•˜ë‚˜ë‹˜ì˜ í‰ê°•ì´ ê·¸ë¦¬ìŠ¤ë„ ì˜ˆìˆ˜ ì•ˆì—ì„œ ë„ˆí¬ ë§ˆìŒê³¼ ìƒê°ì„ ì§€í‚¤ì‹œë¦¬ë¼  [ê°œì—­í•œê¸€]| Be careful for nothing; but in every thing by prayer and supplication with thanksgiving let your requests be made known unto God. And the peace of God, which passeth all understanding, shall keep your hearts and minds through Christ Jesus.  [KJV]
26. ì´ì‚¬ì•¼ 40ì¥ 31ì ˆ| ì˜¤ì§ ì—¬í˜¸ì™€ë¥¼ ì•™ë§í•˜ëŠ” ìëŠ” ìƒˆ í˜ì„ ì–»ìœ¼ë¦¬ë‹ˆ ë…ìˆ˜ë¦¬ì˜ ë‚ ê°œì¹˜ë©° ì˜¬ë¼ê° ê°™ì„ ê²ƒì´ìš” ë‹¬ìŒë°•ì§ˆí•˜ì—¬ë„ ê³¤ë¹„ì¹˜ ì•„ë‹ˆí•˜ê² ê³  ê±¸ì–´ê°€ë„ í”¼ê³¤ì¹˜ ì•„ë‹ˆí•˜ë¦¬ë¡œë‹¤  [ê°œì—­í•œê¸€]| But they that wait upon the LORD shall renew their strength; they shall mount up with wings as eagles; they shall run, and not be weary; and they shall walk, and not faint.  [KJV]
27. ë§ˆíƒœë³µìŒ 11ì¥ 28ì ˆ| ìˆ˜ê³ í•˜ê³  ë¬´ê±°ìš´ ì§ì§„ ìë“¤ì•„ ë‹¤ ë‚´ê²Œë¡œ ì˜¤ë¼ ë‚´ê°€ ë„ˆí¬ë¥¼ ì‰¬ê²Œ í•˜ë¦¬ë¼  [ê°œì—­í•œê¸€]| Come unto me, all ye that labour and are heavy laden, and I will give you rest.  [KJV]
28. ë§ˆíƒœë³µìŒ 22ì¥ 37ì ˆ| ì˜ˆìˆ˜ê»˜ì„œ ê°€ë¼ì‚¬ëŒ€ ë„¤ ë§ˆìŒì„ ë‹¤í•˜ê³  ëª©ìˆ¨ì„ ë‹¤í•˜ê³  ëœ»ì„ ë‹¤í•˜ì—¬ ì£¼ ë„ˆì˜ í•˜ë‚˜ë‹˜ì„ ì‚¬ë‘í•˜ë¼ í•˜ì…¨ìœ¼ë‹ˆ  [ê°œì—­í•œê¸€]| Jesus said unto him, Thou shalt love the Lord thy God with all thy heart, and with all thy soul, and with all thy mind.  [KJV]
29. ìš”í•œë³µìŒ 14ì¥ 13ì ˆ| ë„ˆí¬ê°€ ë‚´ ì´ë¦„ìœ¼ë¡œ ë¬´ì—‡ì„ êµ¬í•˜ë“ ì§€ ë‚´ê°€ ì‹œí–‰í•˜ë¦¬ë‹ˆ ì´ëŠ” ì•„ë²„ì§€ë¡œ í•˜ì—¬ê¸ˆ ì•„ë“¤ì„ ì¸í•˜ì—¬ ì˜ê´‘ì„ ì–»ìœ¼ì‹œê²Œ í•˜ë ¤ í•¨ì´ë¼  [ê°œì—­í•œê¸€]| And whatsoever ye shall ask in my name, that will I do, that the Father may be glorified in the Son.  [KJV]
30. ë¹Œë¦½ë³´ì„œ 4ì¥ 13ì ˆ| ë‚´ê²Œ ëŠ¥ë ¥ ì£¼ì‹œëŠ” ì ì•ˆì—ì„œ ë‚´ê°€ ëª¨ë“  ê²ƒì„ í•  ìˆ˜ ìˆëŠë‹ˆë¼  [ê°œì—­í•œê¸€]| I can do all things through Christ which strengtheneth me.  [KJV]
`;

function parseVerses(str) {
  return str.trim().split('\n').map((line, i) => {
    const parts = line.split('|').map(s => s.trim());  
    return {
      id: i,
      title: parts[0] || '',
      text: parts[1] || '',
      textEn: parts[2] || '',
      favorite: false
     
    };
  });
}

// ì´ˆê¸°í™”
let originalVerses = loadSavedVerses() || parseVerses(originalVersesStr);
let favoriteIds = JSON.parse(localStorage.getItem(STORAGE_KEY_FAVORITES) || '[]');

// favorite ìƒíƒœ ë³µì›
originalVerses = originalVerses.map((v, i) => ({
  ...v,
  id: i,
  favorite: favoriteIds.includes(i)
}));

let verses = [...originalVerses];
let current = 0;
let isHidden = false;
let isRandomMode = false;
let showOnlyFavorites = false;




function renderVerse() {

  const verse = verses[current];
  if (!verse) return;
  document.getElementById('verseTitle').textContent = verse.title;
  document.getElementById('verseText').textContent = verse.text;
  document.getElementById('verseTextEn').textContent = verse.textEn;
  document.getElementById('favoriteCheckbox').checked = verse.favorite;

}


function applyAnimation(direction = 'left') {
  const verseBoxes = document.querySelectorAll('.verse-box, .favorite-box');
  verseBoxes.forEach((box) => {
    box.classList.remove('animate-left', 'animate-right'); // ì´ˆê¸°í™”
    void box.offsetWidth; // ë¦¬í”Œë¡œìš° ê°•ì œ â†’ ì—°ì† í´ë¦­ ì‹œ ì• ë‹ˆë©”ì´ì…˜ ì¬ì‹¤í–‰ë¨
    box.classList.add(direction === 'left' ? 'animate-left' : 'animate-right');
  });
}

function prevVerse() {
applyAnimation('right');
  current = (current - 1 + verses.length) % verses.length;
  renderVerse();
}

function nextVerse() {
    applyAnimation('left');
  current = (current + 1) % verses.length;
  renderVerse();
}

function toggleVerse() {
  isHidden = !isHidden;
  document.getElementById("toggleButton").innerText = isHidden ? "ë³´ì—¬" : "ìˆ¨ê²¨";

  const textElKo = document.getElementById("verseText").parentElement;
  const textElEn = document.getElementById("verseTextEn").parentElement;

  const englishHidden = localStorage.getItem("englishVerseHidden") === "true";

  if (isHidden) {
    textElKo.style.display = "none";
    textElEn.style.display = "none";
  } else {
    textElKo.style.display = "block";

    // ì˜ì–´ ë§ì”€ì´ ìˆ¨ê¹€ ìƒíƒœë¡œ ì €ì¥ë˜ì–´ ìˆë‹¤ë©´ block í•˜ì§€ ì•ŠìŒ
    if (!englishHidden) {
      textElEn.style.display = "block";
    }
  }

  renderVerse();
}

function toggleMode() {
  const modeButton = document.getElementById('modeToggleButton');

  if (!isRandomMode) {
    let shuffled;
    let attempts = 0;
    do {
      shuffled = [...verses];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      attempts++;
    } while (arraysAreEqual(shuffled, verses) && attempts < 10);

    verses = shuffled;
    isRandomMode = true;
    modeButton.textContent = "ìˆœì°¨";
  } else {
    verses = showOnlyFavorites ? originalVerses.filter(v => v.favorite) : [...originalVerses];
    isRandomMode = false;
    modeButton.textContent = "ëœë¤";
  }

  current = 0;
  renderVerse();
}

// ğŸ”§ ë°°ì—´ ë¹„êµ í•¨ìˆ˜ (ê°™ì€ ìˆœì„œì¸ì§€ í™•ì¸)
function arraysAreEqual(arr1, arr2) {
  if (arr1.length !== arr2.length) return false;
  for (let i = 0; i < arr1.length; i++) {
    if (arr1[i] !== arr2[i]) return false;
  }
  return true;
}


function updateFavorite() {
  const verse = verses[current];
  verse.favorite = document.getElementById('favoriteCheckbox').checked;

  const original = originalVerses.find(v => v.id === verse.id);
  if (original) original.favorite = verse.favorite;

  const newFavorites = originalVerses.filter(v => v.favorite).map(v => v.id);
  localStorage.setItem(STORAGE_KEY_FAVORITES, JSON.stringify(newFavorites));
}

function toggleFavoriteCheckbox() {
  const checkbox = document.getElementById('favoriteCheckbox');
  checkbox.checked = !checkbox.checked;
  updateFavorite();
}

function toggleFavorites() {
  const button = document.getElementById("favoriteToggleButton");
  showOnlyFavorites = !showOnlyFavorites;

  if (showOnlyFavorites) {
    const favoritesOnly = originalVerses.filter(v => v.favorite);

    if (favoritesOnly.length === 0) {
      alert("ì¦ê²¨ì°¾ê¸° ì¶”ê°€í•œ ë§ì”€ì´ í•˜ë‚˜ë„ ì—†ìŠµë‹ˆë‹¤.");
      showOnlyFavorites = false; // ìƒíƒœë¥¼ ë‹¤ì‹œ ì›ë˜ëŒ€ë¡œ ë˜ëŒë¦¼
      return; // ì•„ë˜ ì½”ë“œ ì‹¤í–‰ ì¤‘ë‹¨
    }

    verses = favoritesOnly;
    button.textContent = "ëª¨ë‘";
  } else {
    verses = [...originalVerses];
    button.textContent = "ì¦ì°¾";
  }

  current = 0;
  renderVerse();

  // ì¦ê²¨ì°¾ê¸° id ë°°ì—´ ë°˜í™˜ ë° ì½˜ì†” ì¶œë ¥
  const favIds = getFavoriteIds();
  console.log(favIds);
  return favIds;
}


// ìŠ¤ì™€ì´í”„ ê°ì§€
let startX = 0;
let endX = 0;
const verseContainer = document.getElementById('verseContainer');
// í™”ë©´ ì „ì²´ì— ì´ë²¤íŠ¸ ì ìš©
document.addEventListener('touchstart', e => {
  if (e.target.type === 'checkbox') return;
  startX = e.touches[0].clientX;
});

document.addEventListener('touchend', e => {
  if (e.target.type === 'checkbox') return;
  endX = e.changedTouches[0].clientX;
  handleSwipe();
});

document.addEventListener('mousedown', e => {
  if (e.target.type === 'checkbox') return;
  startX = e.clientX;
});

document.addEventListener('mouseup', e => {
  if (e.target.type === 'checkbox') return;
  endX = e.clientX;
  handleSwipe();
});


// ì¦ê²¨ì°¾ê¸° ì¶”ê°€ëœ ë²ˆí˜¸(id) ë°°ì—´ ë°˜í™˜ í•¨ìˆ˜
function getFavoriteIds() {
  return originalVerses.filter(v => v.favorite).map(v => v.id);
}

let lastSwipeTime = 0;
let swipeCount = 0;

function handleSwipe() {
  const diff = endX - startX;
  const now = Date.now();

  // ì—°ì† ìŠ¤ì™€ì´í”„ ì—¬ë¶€ íŒë‹¨ (400ms ì´ë‚´ ë‘ ë²ˆ)
  if (Math.abs(diff) > 50) {
    if (now - lastSwipeTime < 400) {
      swipeCount++;
    } else {
      swipeCount = 1;
    }

    lastSwipeTime = now;

    if (swipeCount >= 2) {
      // ë‘ ë²ˆ ë¹ ë¥´ê²Œ ìŠ¤ì™€ì´í”„í•˜ë©´ 10ì¹¸ ì í”„
      if (diff > 0) {
        jumpVerse(-10); // ì˜¤ë¥¸ìª½ìœ¼ë¡œ ìŠ¤ì™€ì´í”„ = ì´ì „
      } else {
        jumpVerse(10); // ì™¼ìª½ìœ¼ë¡œ ìŠ¤ì™€ì´í”„ = ë‹¤ìŒ
      }
      swipeCount = 0; // ë¦¬ì…‹
    } else {
      // ì¼ë°˜ ìŠ¤ì™€ì´í”„
      diff > 0 ? prevVerse() : nextVerse();
    }
  }
}

function jumpVerse(step) {
  applyAnimation(step > 0 ? 'left' : 'right');
  current = (current + step + verses.length) % verses.length;
  renderVerse();
}

// í¸ì§‘
let isEditing = false;

function toggleEditMode() {
  const editContainer = document.getElementById('editContainer');
  const textarea = document.getElementById('editTextarea');
  isEditing = !isEditing;

  if (isEditing) {
    const str = originalVerses.map(v => `${v.title}| ${v.text}| ${v.textEn || ''}`).join('\n');
    textarea.value = str;
    editContainer.style.display = 'flex';
  } else {
    editContainer.style.display = 'none';
  }
}

function saveEditedVerses() {
  const editedText = document.getElementById('editTextarea').value.trim();
  const lines = editedText.split('\n').filter(line => line.trim() !== '');
  const isValid = lines.every(line => {
    const parts = line.split('|');
    return parts.length === 3 && parts[0].trim() && parts[1].trim();
  });

  if (!isValid) {
    showFormatError();
    return;
  }

  const newVerses = lines.map((line, idx) => {
const [title, text, textEn] = line.split('|').map(str => str.trim());
return { id: idx, title, text, textEn: textEn || '', favorite: false };
  });

  for (let v of newVerses) {
    const existing = originalVerses.find(o => o.title === v.title && o.text === v.text);
    if (existing) v.favorite = existing.favorite;
  }

  originalVerses = [...newVerses];
  verses = showOnlyFavorites ? originalVerses.filter(v => v.favorite) : [...originalVerses];

  // ì €ì¥
  saveVersesToStorage(originalVerses);
  localStorage.setItem(STORAGE_KEY_FAVORITES, JSON.stringify(originalVerses.filter(v => v.favorite).map(v => v.id)));

  current = 0;
  toggleEditMode();
  renderVerse();
}

function cancelEdit() {
  toggleEditMode();
}

function resetToOriginal() {
  const textarea = document.getElementById('editTextarea');
  textarea.value = originalVersesStr.trim();
}

function showFormatError() {
  if (!document.getElementById('formatErrorBox')) {
    const errorBox = document.createElement('div');
    errorBox.id = 'formatErrorBox';
    errorBox.style.position = 'fixed';
    errorBox.style.top = '50%';
    errorBox.style.left = '50%';
    errorBox.style.transform = 'translate(-50%, -50%)';
    errorBox.style.backgroundColor = '#2a2a2a';
    errorBox.style.color = '#fff';
    errorBox.style.padding = '20px';
    errorBox.style.borderRadius = '10px';
    errorBox.style.zIndex = '10';
    errorBox.style.textAlign = 'center';
    errorBox.innerHTML = `
      <p>í¸ì§‘ í˜•ì‹ì— <br>ì–´ê¸‹ë‚˜ê²Œ í¸ì§‘í•˜ì…¨ë„¤ìš”.<br>ì£„ì†¡í•˜ì§€ë§Œ ì°½ì„ ë‹«ìŠµë‹ˆë‹¤.</p>
      <button id="formatErrorOkButton" style="margin-top:15px; padding:8px 20px; border:none; border-radius:5px; background:#FFD95A; color:#121212; font-weight:bold; cursor:pointer;">í™•ì¸</button>
    `;
    document.body.appendChild(errorBox);
    document.getElementById('formatErrorOkButton').onclick = () => {
      errorBox.remove();
      toggleEditMode();
    };
  }
}

// ìµœì´ˆ ë Œë”ë§
renderVerse();

</script>

<script>
function openHelpPopup() {
  hideSettingsMenu()
  if (document.getElementById("helpPopup")) return;

  const popupOverlay = document.createElement("div");
  popupOverlay.id = "helpPopup";
  popupOverlay.className = "help-popup-overlay";

  const popupContent = document.createElement("div");
  popupContent.className = "help-popup-container";

  popupContent.innerHTML = `

    <div class="help-title">ìµœì¢…ìˆ˜ì •ì¼ : 2025.06.01</div>
  
    <textarea class="help-textarea" readonly>
ğŸ“ í˜ì´ë˜ëŠ” ì„±ê²½ì•”ì†¡ 30êµ¬ì ˆ ì„¤ëª…ì„œ

1.ìˆ¨ê²¨/ë³´ì—¬ : ë§ì”€ ë‚´ìš©ì„ ìˆ¨ê¸°ê±°ë‚˜ ë³´ì´ë„ë¡ í•©ë‹ˆë‹¤.

2.ëœë¤/ìˆœì°¨ : ë§ì”€ ë³´ì´ëŠ” ìˆœì„œë¥¼ ì„ì–´ì„œ ëœë¤ìœ¼ë¡œ ë‚˜ì˜¤ê²Œ í•˜ê±°ë‚˜, ìˆœì°¨ì ìœ¼ë¡œ ë‚˜ì˜¤ê²Œ í•©ë‹ˆë‹¤.

3.ì¦ì°¾/ëª¨ë‘ : ëª¨ë“  ë§ì”€ì´ ë‚˜ì˜¤ê²Œ í•˜ê±°ë‚˜, ì¦ê²¨ì°¾ê¸°ì— ì¶”ê°€ëœ ë§ì”€ë§Œ ë‚˜ì˜¤ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

4.ì„¤ì •/ë§ì”€ í¸ì§‘í•˜ê¸° : ë§ì”€ì„ í¸ì§‘í•˜ê±°ë‚˜ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì „ë¬¸ê°€ëª¨ë“œ ì´ë¯€ë¡œ ìì‹  ìˆëŠ” ë¶„ë“¤ë§Œ ì‹œë„í•´ ì£¼ì„¸ìš”. ì „ì²´ë¥¼ ë³µì‚¬í•´ì„œ ì¹´í†¡ì´ë‚˜ êµ¬ê¸€ë“œë¼ì´ë¸Œë¡œ ë‚´ìš©ì„ ë°±ì—…í•œ ë‹¤ìŒ pc ì—ì„œ í¸ì§‘ ì‘ì—…ì„ ì™„ë£Œí•œí›„ ë‹¤ì‹œ í•¸ë“œí°ìœ¼ë¡œ ê¸€ì„ ê°€ì ¸ì˜¤ë©´ í¸ë¦¬í•©ë‹ˆë‹¤. ì´ˆê¸°í™” ë²„íŠ¼ì´ ìˆì–´ì„œ ë‚´ìš©ì´ ê¼¬ì´ê±°ë‚˜ ì‹¤ìˆ˜ë¥¼ í•˜ë”ë¼ë„ ë‹¤ì‹œ ì›ìƒë³µêµ¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

5.ìœ ìš©í•œ ê¸°ëŠ¥ : ì†ê°€ë½ìœ¼ë¡œ ì¢Œìš°ë¡œ ì²œì²œíˆ ë„˜ê¸°ë©´ ë§ì”€ì´ í•œ ë‹¨ê³„ì”© ë³€í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ë¹ ë¥´ê²Œ ë‘ ë²ˆ ì—°ì† ë„˜ê¸°ë©´ 10ê°œì”© ë‹¨ë²ˆì— ë„˜ì–´ê°‘ë‹ˆë‹¤.

6.ì €ì‘ê¶Œ : ì €ì‘ê¶Œì´ ì™„ë£Œëœ ê°œì—­í•œê¸€, KJV(ì˜ë¬¸) ì„±ê²½ë§ì”€ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ê°œì—­ê°œì •, NIV(ì˜ë¬¸) ì„±ê²½ë§ì”€ì„ ì‚¬ìš©í•˜ê³ ì‹¶ì—ˆìœ¼ë‚˜ ì €ì‘ê¶Œë²•ì— ê±¸ë¦¬ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•˜ì§€ ëª»í–ˆìŒì„ ì•Œë ¤ë“œë¦¬ë‹ˆ í•„ìš”í•˜ì‹œë©´ ì§ì ‘ í¸ì§‘í•´ì„œ ì‚¬ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤. ì¶”ì²œë“œë¦¬ëŠ” ì¡°í•©ì€ ë„¤ë¹„ê²Œì´í†  ì•”ì†¡ë§ì”€ 60êµ¬ì ˆ ê°œì—­ê°œì •, NIV(ì˜ë¬¸) ì¡°í•©ì„ ì¶”ì²œí•©ë‹ˆë‹¤.
    </textarea>
    <div class="help-button-box">
      <button class="help-close-btn" onclick="closeHelpPopup()">ë‹«ê¸°</button>
    </div>
  `;

  popupOverlay.appendChild(popupContent);
  document.body.appendChild(popupOverlay);

  if (!document.getElementById("helpPopupStyle")) {
    const style = document.createElement("style");
    style.id = "helpPopupStyle";
    style.textContent = `
/* íŒì—… ì „ì²´ í™”ë©´ ë®ê¸° */
.help-popup-overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background-color: rgba(10, 10, 10, 0.95);
  display: flex;
  justify-content: center;
  align-items: center; /* stretch â†’ centerë¡œ ë³€ê²½í•´ì„œ ì¤‘ì•™ ì •ë ¬ */
  padding: 5px; /* ê°€ì¥ìë¦¬ ì—¬ë°± ì¶”ê°€ */
  z-index: 9999;
  box-sizing: border-box;
  overflow: auto; /* í˜¹ì‹œ ë„˜ì¹  ë•Œ ìŠ¤í¬ë¡¤ */
}

/* íŒì—… ë³¸ì²´ */
.help-popup-container {
  background-color: #1c1c1c;
  border-radius: 8px; /* ì‚´ì§ ë‘¥ê¸€ê²Œ */
  padding: 5px 0 10px 0;
  width: 100%;
  height: 100%; 

  box-sizing: border-box;
  color: #e0e0e0;
  font-family: 'Segoe UI', sans-serif;
  font-size: 14px;
  line-height: 1.4;
  display: flex;
  flex-direction: column;
}

/* ì œëª© ì¤„ */
.help-title {
  margin: 2px 0 2px 0;
   font-size: 1rem;
  color: #ffffff;
  padding-left: 4px;
   line-height: 1.2;

}

.help-textarea {
  flex: 1;
  width: 100%;
  resize: none;
  overflow-y: auto;
  background-color: #2a2a2a;
  color: #ffffff;
  border: 1px solid #555;
  border-radius: 4px;
  padding: 12px;
   font-size: 1rem;
  box-sizing: border-box;
  line-height: 1.4;
  margin-top: 10px;
  min-height: 200px; /* ê¸°ë³¸ê°’, í™”ë©´ì— ë”°ë¼ ì»¤ì§ */
  max-height: none;  /* ìµœëŒ€ ë†’ì´ ì œí•œ í•´ì œ */
}

/* ë‹«ê¸° ë²„íŠ¼ ì˜ì—­ */
.help-button-box {
  text-align: right;
  margin: 15px 10px 0 0;
}

/* ë‹«ê¸° ë²„íŠ¼ */
.help-close-btn {
  background-color: #3a3a3a;
  color: #ffffff;
  border: none;
  padding: 8px 20px;
  border-radius: 6px;
  font-size: 14px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.help-close-btn:hover {
  background-color: #555;
}
`;
    document.head.appendChild(style);
  }
}

function closeHelpPopup() {
  const popup = document.getElementById("helpPopup");
  if (popup) popup.remove();

location.reload(true);
}

</script>
<script>
  // ì´ˆê¸° ìƒíƒœë¥¼ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì—ì„œ ë¶ˆëŸ¬ì˜¤ê¸°
  document.addEventListener("DOMContentLoaded", () => {
    const textElEn = document.getElementById("verseTextEn")?.parentElement;
    const btn = document.getElementById("toggleEnglishVerseBtn");
    const savedState = localStorage.getItem("englishVerseHidden");

    if (!textElEn || !btn) return;

    if (savedState === "true") {
      textElEn.style.display = "none";
      btn.innerText = "ğŸ’— ì˜ì–´ ë§ì”€ ë³´ì´ê¸°";
    } else {
      textElEn.style.display = "";
      btn.innerText = "ğŸ’— ì˜ì–´ ë§ì”€ ìˆ¨ê¸°ê¸°";
    }
  });

  function toggleEnglishVerse() {
    const textElEn = document.getElementById("verseTextEn")?.parentElement;
    const btn = document.getElementById("toggleEnglishVerseBtn");

    if (!textElEn || !btn) return;

    const isHidden = textElEn.style.display === "none";

    if (isHidden) {
      textElEn.style.display = "";
      btn.innerText = "ğŸ’— ì˜ì–´ ë§ì”€ ìˆ¨ê¸°ê¸°";
      localStorage.setItem("englishVerseHidden", "false");
    } else {
      textElEn.style.display = "none";
      btn.innerText = "ğŸ’— ì˜ì–´ ë§ì”€ ë³´ì´ê¸°";
      localStorage.setItem("englishVerseHidden", "true");
    }
  }
</script>
<script>
  document.getElementById("game1").addEventListener("click", function () {
    // originalVersesê°€ ìµœì‹  ë°ì´í„°ë¼ê³  ê°€ì •í•˜ê³  ì €ì¥
    localStorage.setItem(STORAGE_KEY_VERSES, JSON.stringify(verses));   
    location.href = "game.htm";
  });
</script>
</body>
</html>
